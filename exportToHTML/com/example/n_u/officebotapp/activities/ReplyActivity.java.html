<html>
<head>
<title>ReplyActivity.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #2b91af; font-weight: normal; font-style: normal; }
.s0 { color: rgb(0,208,208); }
.s1 { color: rgb(208,208,208); }
.s2 { color: rgb(208,208,208); }
.s3 { color: rgb(255,255,0); }
.s4 { color: rgb(220,120,220); }
.s5 { color: rgb(0,224,0); }
.ls0 { height: 1px; border-width: 0; color: rgb(32,32,48); background-color:rgb(32,32,48)}
</style>
</head>
<BODY BGCOLOR="#101020">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
ReplyActivity.java</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">package </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">activities</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">animation</span><span class="s2">.</span><span class="s1">Animator</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">animation</span><span class="s2">.</span><span class="s1">AnimatorListenerAdapter</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">annotation</span><span class="s2">.</span><span class="s1">TargetApi</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">content</span><span class="s2">.</span><span class="s1">Context</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">graphics</span><span class="s2">.</span><span class="s1">Rect</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">media</span><span class="s2">.</span><span class="s1">MediaRecorder</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">os</span><span class="s2">.</span><span class="s1">AsyncTask</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">os</span><span class="s2">.</span><span class="s1">Build</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">os</span><span class="s2">.</span><span class="s1">Bundle</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">support</span><span class="s2">.</span><span class="s1">annotation</span><span class="s2">.</span><span class="s1">Nullable</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">support</span><span class="s2">.</span><span class="s1">annotation</span><span class="s2">.</span><span class="s1">RequiresApi</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">support</span><span class="s2">.</span><span class="s1">design</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">Snackbar</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">support</span><span class="s2">.</span><span class="s1">v4</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">SwipeRefreshLayout</span><span class="s2">.</span><span class="s1">OnRefreshListener</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">support</span><span class="s2">.</span><span class="s1">v7</span><span class="s2">.</span><span class="s1">app</span><span class="s2">.</span><span class="s1">AppCompatActivity</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">text</span><span class="s2">.</span><span class="s1">Editable</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">text</span><span class="s2">.</span><span class="s1">TextWatcher</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">Log</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">LayoutInflater</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">MotionEvent</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">View</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">View</span><span class="s2">.</span><span class="s1">OnClickListener</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">View</span><span class="s2">.</span><span class="s1">OnLongClickListener</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">View</span><span class="s2">.</span><span class="s1">OnTouchListener</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">ViewPropertyAnimator</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">inputmethod</span><span class="s2">.</span><span class="s1">InputMethodManager</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">EditText</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">TextView</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">Toast</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">activeandroid</span><span class="s2">.</span><span class="s1">ActiveAndroid</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">activeandroid</span><span class="s2">.</span><span class="s1">query</span><span class="s2">.</span><span class="s1">Delete</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">dewarder</span><span class="s2">.</span><span class="s1">holdinglibrary</span><span class="s2">.</span><span class="s1">HoldingButtonLayout</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">dewarder</span><span class="s2">.</span><span class="s1">holdinglibrary</span><span class="s2">.</span><span class="s1">HoldingButtonLayoutListener</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">R</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">adapters</span><span class="s2">.</span><span class="s1">ReplyAdapter</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">helpers</span><span class="s2">.</span><span class="s1">Progress</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">intefaces</span><span class="s2">.</span><span class="s1">IReply</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">models</span><span class="s2">.</span><span class="s1">Message</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">models</span><span class="s2">.</span><span class="s1">Reply</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">models</span><span class="s2">.</span><span class="s1">SearchUser</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">models</span><span class="s2">.</span><span class="s1">Status</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">utils</span><span class="s2">.</span><span class="s1">AppLog</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">utils</span><span class="s2">.</span><span class="s1">InternetConnection</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">utils</span><span class="s2">.</span><span class="s1">OBSession</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">utils</span><span class="s2">.</span><span class="s1">OfficeBotURI</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">viewsholders</span><span class="s2">.</span><span class="s1">ActivityReplyHolder</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">github</span><span class="s2">.</span><span class="s1">angads25</span><span class="s2">.</span><span class="s1">filepicker</span><span class="s2">.</span><span class="s1">controller</span><span class="s2">.</span><span class="s1">DialogSelectionListener</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">github</span><span class="s2">.</span><span class="s1">angads25</span><span class="s2">.</span><span class="s1">filepicker</span><span class="s2">.</span><span class="s1">model</span><span class="s2">.</span><span class="s1">DialogConfigs</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">github</span><span class="s2">.</span><span class="s1">angads25</span><span class="s2">.</span><span class="s1">filepicker</span><span class="s2">.</span><span class="s1">model</span><span class="s2">.</span><span class="s1">DialogProperties</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">github</span><span class="s2">.</span><span class="s1">angads25</span><span class="s2">.</span><span class="s1">filepicker</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">FilePickerDialog</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">nhaarman</span><span class="s2">.</span><span class="s1">listviewanimations</span><span class="s2">.</span><span class="s1">appearance</span><span class="s2">.</span><span class="s1">simple</span><span class="s2">.</span><span class="s1">SwingRightInAnimationAdapter</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">io</span><span class="s2">.</span><span class="s1">BufferedInputStream</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">io</span><span class="s2">.</span><span class="s1">File</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">io</span><span class="s2">.</span><span class="s1">FileOutputStream</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">io</span><span class="s2">.</span><span class="s1">IOException</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">io</span><span class="s2">.</span><span class="s1">InputStream</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">io</span><span class="s2">.</span><span class="s1">OutputStream</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">net</span><span class="s2">.</span><span class="s1">URL</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">net</span><span class="s2">.</span><span class="s1">URLConnection</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">ArrayList</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">Arrays</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">HashMap</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">List</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">Objects</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s0">import </span><span class="s1">okhttp3</span><span class="s2">.</span><span class="s1">MediaType</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">okhttp3</span><span class="s2">.</span><span class="s1">MultipartBody</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">okhttp3</span><span class="s2">.</span><span class="s1">RequestBody</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">retrofit2</span><span class="s2">.</span><span class="s1">Call</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">retrofit2</span><span class="s2">.</span><span class="s1">Callback</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">retrofit2</span><span class="s2">.</span><span class="s1">Response</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s0">import static </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">View</span><span class="s2">.</span><span class="s1">GONE</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import static </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">View</span><span class="s2">.</span><span class="s1">INVISIBLE</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import static </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">View</span><span class="s2">.</span><span class="s1">VISIBLE</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import static </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">activities</span><span class="s2">.</span><span class="s1">NewMessageActivity</span><span class="s2">.</span><span class="s1">SLIDE_TO_CANCEL_ALPHA_MULTIPLIER</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import static </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">activities</span><span class="s2">.</span><span class="s1">NewMessageActivity</span><span class="s2">.</span><span class="s1">TIME_INVALIDATION_FREQUENCY</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import static </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">activities</span><span class="s2">.</span><span class="s1">NewMessageActivity</span><span class="s2">.</span><span class="s1">mFormatter</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s0">public class </span><span class="s1">ReplyActivity 
        </span><span class="s0">extends </span><span class="s1">AppCompatActivity 
        </span><span class="s0">implements </span><span class="s1">OnTouchListener</span><span class="s2">, </span><span class="s1">HoldingButtonLayoutListener </span><span class="s2">{</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">ReplyAdapter adapter </span><span class="s2">= </span><span class="s0">null</span><span class="s2">;</span><span class="s1"> 
    @Nullable 
    </span><span class="s0">private </span><span class="s1">MultipartBody</span><span class="s2">.</span><span class="s1">Part bodyAudio </span><span class="s2">= </span><span class="s0">null</span><span class="s2">, </span><span class="s1">bodyFile </span><span class="s2">= </span><span class="s0">null</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">Bundle bundle </span><span class="s2">= </span><span class="s0">null</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">Context context </span><span class="s2">= </span><span class="s0">this</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">String fileAudioSource </span><span class="s2">= </span><span class="s0">null</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">Message msg </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Message</span><span class="s2">();</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">MediaRecorder recorder </span><span class="s2">= </span><span class="s0">null</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">List</span><span class="s2">&lt;</span><span class="s1">Reply</span><span class="s2">&gt; </span><span class="s1">replyArray </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">ActivityReplyHolder holder</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">HoldingButtonLayout mHoldingButtonLayout</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">TextView mTime</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">EditText mInput</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">android</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">ImageView mAudioIcon</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">View mSlideToCancel</span><span class="s2">;</span><span class="s1"> 
 
    </span><span class="s0">private int </span><span class="s1">mAnimationDuration</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">ViewPropertyAnimator mTimeAnimator</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">ViewPropertyAnimator mSlideToCancelAnimator</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">ViewPropertyAnimator mInputAnimator</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private long </span><span class="s1">mStartTime </span><span class="s2">= </span><span class="s3">0</span><span class="s2">, </span><span class="s1">mSecond </span><span class="s2">= </span><span class="s3">0000000001000L</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">Runnable mTimerRunnable</span><span class="s2">;</span><span class="s1"> 
 
    </span><span class="s0">private </span><span class="s1">DownloadFileFromURL downloader</span><span class="s2">;</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">protected void </span><span class="s1">onCreate</span><span class="s2">(</span><span class="s1">Bundle bundle</span><span class="s2">) {</span><span class="s1"> 
        </span><span class="s0">super</span><span class="s2">.</span><span class="s1">onCreate</span><span class="s2">(</span><span class="s1">bundle</span><span class="s2">);</span><span class="s1"> 
        View v </span><span class="s2">= </span><span class="s1">LayoutInflater</span><span class="s2">.</span><span class="s1">from</span><span class="s2">(</span><span class="s0">this</span><span class="s2">).</span><span class="s1">inflate</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">layout</span><span class="s2">.</span><span class="s1">activity_reply</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span><span class="s1"> 
        holder </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ActivityReplyHolder</span><span class="s2">(</span><span class="s1">v</span><span class="s2">);</span><span class="s1"> 
        setContentView</span><span class="s2">(</span><span class="s1">v</span><span class="s2">);</span><span class="s1"> 
        setUi</span><span class="s2">();</span><span class="s1"> 
        adapter </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ReplyAdapter</span><span class="s2">(</span><span class="s0">this</span><span class="s2">, </span><span class="s1">replyArray</span><span class="s2">);</span><span class="s1"> 
        SwingRightInAnimationAdapter animationAdapter </span><span class="s2">= </span><span class="s0">new </span><span class="s1">SwingRightInAnimationAdapter</span><span class="s2">(</span><span class="s1">adapter</span><span class="s2">);</span><span class="s1"> 
        animationAdapter</span><span class="s2">.</span><span class="s1">setAbsListView</span><span class="s2">(</span><span class="s1">holder</span><span class="s2">.</span><span class="s1">getReplyList</span><span class="s2">());</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getReplyList</span><span class="s2">().</span><span class="s1">setAdapter</span><span class="s2">(</span><span class="s1">animationAdapter</span><span class="s2">);</span><span class="s1"> 
        </span><span class="s2">((</span><span class="s1">TextView</span><span class="s2">) </span><span class="s1">findViewById</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">id</span><span class="s2">.</span><span class="s1">text_title_in_bar</span><span class="s2">)).</span><span class="s1">setText</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">tag_main_message_activity</span><span class="s2">);</span><span class="s1"> 
        setListener</span><span class="s2">();</span><span class="s1"> 
        data</span><span class="s2">();</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getReplyList</span><span class="s2">().</span><span class="s1">setEmptyView</span><span class="s2">(</span><span class="s1">holder</span><span class="s2">.</span><span class="s1">getEmptyViewTextReplyBelow</span><span class="s2">());</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">private void </span><span class="s1">sendMsg</span><span class="s2">() {</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">InternetConnection</span><span class="s2">.</span><span class="s1">checkConnection</span><span class="s2">(</span><span class="s1">context</span><span class="s2">))</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s2">(</span><span class="s1">holder</span><span class="s2">.</span><span class="s1">getReplyMsgEditText</span><span class="s2">().</span><span class="s1">getText</span><span class="s2">().</span><span class="s1">toString</span><span class="s2">().</span><span class="s1">isEmpty</span><span class="s2">()) {</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">empty_field</span><span class="s2">), </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
            </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                HashMap</span><span class="s2">&lt;</span><span class="s1">String</span><span class="s2">, </span><span class="s1">Object</span><span class="s2">&gt; </span><span class="s1">map </span><span class="s2">= </span><span class="s0">new </span><span class="s1">HashMap</span><span class="s2">&lt;&gt;();</span><span class="s1"> 
                </span><span class="s2">(</span><span class="s1">map</span><span class="s2">).</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">content_key</span><span class="s2">), </span><span class="s1">holder</span><span class="s2">.</span><span class="s1">getReplyMsgEditText</span><span class="s2">().</span><span class="s1">getText</span><span class="s2">().</span><span class="s1">toString</span><span class="s2">());</span><span class="s1"> 
                </span><span class="s2">(</span><span class="s1">map</span><span class="s2">).</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">user_id_key</span><span class="s2">), </span><span class="s1">OBSession</span><span class="s2">.</span><span class="s1">getPreference</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">id_key</span><span class="s2">), </span><span class="s1">getApplicationContext</span><span class="s2">()));</span><span class="s1"> 
                </span><span class="s2">(</span><span class="s1">map</span><span class="s2">).</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">tag_id_key</span><span class="s2">), </span><span class="s1">getIntent</span><span class="s2">().</span><span class="s1">getStringExtra</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">tag_id_key</span><span class="s2">)));</span><span class="s1"> 
                </span><span class="s2">(</span><span class="s1">map</span><span class="s2">).</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">message_id_key</span><span class="s2">), </span><span class="s1">bundle</span><span class="s2">.</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">MSG_ID_BUNDLE</span><span class="s2">)));</span><span class="s1"> 
                Log</span><span class="s2">.</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;TAGmsg&quot;</span><span class="s2">, </span><span class="s4">&quot;onClick: &quot; </span><span class="s2">+ </span><span class="s1">map</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">());</span><span class="s1"> 
                </span><span class="s0">final </span><span class="s1">IReply iReply </span><span class="s2">= </span><span class="s1">OfficeBotURI</span><span class="s2">.</span><span class="s1">retrofit</span><span class="s2">().</span><span class="s1">create</span><span class="s2">(</span><span class="s1">IReply</span><span class="s2">.</span><span class="s0">class</span><span class="s2">);</span><span class="s1"> 
                retrofit2</span><span class="s2">.</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">call </span><span class="s2">= </span><span class="s1">iReply</span><span class="s2">.</span><span class="s1">sendReply</span><span class="s2">(</span><span class="s1">map</span><span class="s2">);</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getReplyMsgEditText</span><span class="s2">().</span><span class="s1">setText</span><span class="s2">(</span><span class="s0">null</span><span class="s2">);</span><span class="s1"> 
                call</span><span class="s2">.</span><span class="s1">enqueue</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Callback</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt;() {</span><span class="s1"> 
                    </span><span class="s0">public void </span><span class="s1">onFailure</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">call</span><span class="s2">, </span><span class="s1">Throwable t</span><span class="s2">) {</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;Error&quot; </span><span class="s2">+ </span><span class="s1">t</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">(), </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">());</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
 
                    </span><span class="s0">public void </span><span class="s1">onResponse</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">call</span><span class="s2">, </span><span class="s1">Response</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">response</span><span class="s2">) {</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">() + </span><span class="s4">&quot;&quot;</span><span class="s2">);</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">());</span><span class="s1"> 
                        </span><span class="s0">if </span><span class="s2">((</span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">() == </span><span class="s3">200</span><span class="s2">) &amp;&amp; (</span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">().</span><span class="s1">isReply</span><span class="s2">())) {</span><span class="s1"> 
                            Log</span><span class="s2">.</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;SEND_MSG_LOG&quot;</span><span class="s2">, </span><span class="s4">&quot;onResponse: &quot; </span><span class="s2">+ </span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">().</span><span class="s1">getReplyId</span><span class="s2">());</span><span class="s1"> 
                            </span><span class="s0">if </span><span class="s2">((</span><span class="s1">bodyFile </span><span class="s2">!= </span><span class="s0">null</span><span class="s2">) || (</span><span class="s1">bodyAudio </span><span class="s2">!= </span><span class="s0">null</span><span class="s2">)) {</span><span class="s1"> 
                                </span><span class="s0">if </span><span class="s2">((</span><span class="s1">bodyAudio </span><span class="s2">!= </span><span class="s0">null</span><span class="s2">) &amp;&amp; (</span><span class="s1">bodyFile </span><span class="s2">== </span><span class="s0">null</span><span class="s2">)) {</span><span class="s1"> 
                                    call </span><span class="s2">= </span><span class="s1">iReply</span><span class="s2">.</span><span class="s1">fileSend</span><span class="s2">(</span><span class="s1">bodyAudio 
                                            </span><span class="s2">, </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">().</span><span class="s1">getReplyId</span><span class="s2">()));</span><span class="s1"> 
                                </span><span class="s2">} </span><span class="s0">else if </span><span class="s2">((</span><span class="s1">bodyAudio </span><span class="s2">== </span><span class="s0">null</span><span class="s2">) &amp;&amp; (</span><span class="s1">bodyFile </span><span class="s2">!= </span><span class="s0">null</span><span class="s2">)) {</span><span class="s1"> 
                                    call </span><span class="s2">= </span><span class="s1">iReply</span><span class="s2">.</span><span class="s1">fileSend</span><span class="s2">(</span><span class="s1">bodyFile 
                                            </span><span class="s2">, </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">().</span><span class="s1">getReplyId</span><span class="s2">()));</span><span class="s1"> 
                                </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                                    call </span><span class="s2">= </span><span class="s1">iReply</span><span class="s2">.</span><span class="s1">fileSend</span><span class="s2">(</span><span class="s1">bodyAudio 
                                            </span><span class="s2">, </span><span class="s1">bodyFile 
                                            </span><span class="s2">, </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">().</span><span class="s1">getReplyId</span><span class="s2">()));</span><span class="s1"> 
                                </span><span class="s2">}</span><span class="s1"> 
                                bodyAudio </span><span class="s2">= </span><span class="s1">bodyFile </span><span class="s2">= </span><span class="s0">null</span><span class="s2">;</span><span class="s1"> 
                                call</span><span class="s2">.</span><span class="s1">enqueue</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Callback</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt;() {</span><span class="s1"> 
                                    </span><span class="s0">public void </span><span class="s1">onFailure</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">call</span><span class="s2">, </span><span class="s1">Throwable t</span><span class="s2">) {</span><span class="s1"> 
                                        call</span><span class="s2">.</span><span class="s1">request</span><span class="s2">();</span><span class="s1"> 
                                        AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;Server Offline&quot; </span><span class="s2">+ </span><span class="s1">t</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">(), </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                                    </span><span class="s2">}</span><span class="s1"> 
 
                                    </span><span class="s0">public void </span><span class="s1">onResponse</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">call</span><span class="s2">, </span><span class="s1">Response</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">response</span><span class="s2">) {</span><span class="s1"> 
                                        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">() == </span><span class="s3">200</span><span class="s2">) {</span><span class="s1"> 
                                            AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;Reply Send&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                                            holder</span><span class="s2">.</span><span class="s1">getReplyListRefreshList</span><span class="s2">().</span><span class="s1">performLongClick</span><span class="s2">();</span><span class="s1"> 
 
                                        </span><span class="s2">} </span><span class="s0">else</span><span class="s1"> 
                                            AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;Server Offline&quot; </span><span class="s2">+ </span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">(), </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                                    </span><span class="s2">}</span><span class="s1"> 
                                </span><span class="s2">});</span><span class="s1"> 
                            </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                                AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;Reply Send&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                                holder</span><span class="s2">.</span><span class="s1">getReplyListRefreshList</span><span class="s2">().</span><span class="s1">performLongClick</span><span class="s2">();</span><span class="s1"> 
                            </span><span class="s2">}</span><span class="s1"> 
                        </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                            AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">() + </span><span class="s4">&quot;&quot;</span><span class="s2">);</span><span class="s1"> 
                            AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;Server Problem try Again&quot; </span><span class="s2">+ </span><span class="s4">&quot;</span><span class="s3">\n</span><span class="s4">&quot; </span><span class="s2">+ </span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">(),</span><span class="s1"> 
                                    getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                        </span><span class="s2">}</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
                </span><span class="s2">});</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s0">else </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">NET_NOT_AVAILABLE</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 
</span><span class="s5">//    private void setDraw() {</span><span class="s1"> 
</span><span class="s5">//        Object localObject = new StringBuilder(this.msg.getData_src());</span><span class="s1"> 
</span><span class="s5">//        localObject = ((StringBuilder) localObject).substring(((StringBuilder) localObject).indexOf(&quot;.&quot;));</span><span class="s1"> 
</span><span class="s5">//        int i = -1;</span><span class="s1"> 
</span><span class="s5">//        switch (localObject.hashCode()) {</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        for (; ; ) {</span><span class="s1"> 
</span><span class="s5">//            switch (i) {</span><span class="s1"> 
</span><span class="s5">//                default:</span><span class="s1"> 
</span><span class="s5">//                    return;</span><span class="s1"> 
</span><span class="s5">//                if (localObject.equals(&quot;.jpg&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                    i = 0;</span><span class="s1"> 
</span><span class="s5">//                    continue;</span><span class="s1"> 
</span><span class="s5">//                    if (localObject.equals(&quot;.mp3&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                        i = 1;</span><span class="s1"> 
</span><span class="s5">//                        continue;</span><span class="s1"> 
</span><span class="s5">//                        if (localObject.equals(&quot;.mp4&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                            i = 2;</span><span class="s1"> 
</span><span class="s5">//                            continue;</span><span class="s1"> 
</span><span class="s5">//                            if (localObject.equals(&quot;.pdf&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                                i = 3;</span><span class="s1"> 
</span><span class="s5">//                                continue;</span><span class="s1"> 
</span><span class="s5">//                                if (localObject.equals(&quot;.doc&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                                    i = 4;</span><span class="s1"> 
</span><span class="s5">//                                    continue;</span><span class="s1"> 
</span><span class="s5">//                                    if (localObject.equals(&quot;.docx&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                                        i = 5;</span><span class="s1"> 
</span><span class="s5">//                                        continue;</span><span class="s1"> 
</span><span class="s5">//                                        if (localObject.equals(&quot;.png&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                                            i = 6;</span><span class="s1"> 
</span><span class="s5">//                                            continue;</span><span class="s1"> 
</span><span class="s5">//                                            if (localObject.equals(&quot;.aspx&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                                                i = 7;</span><span class="s1"> 
</span><span class="s5">//                                                continue;</span><span class="s1"> 
</span><span class="s5">//                                                if (localObject.equals(&quot;.jpeg&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                                                    i = 8;</span><span class="s1"> 
</span><span class="s5">//                                                    continue;</span><span class="s1"> 
</span><span class="s5">//                                                    if (localObject.equals(&quot;.bmp&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                                                        i = 9;</span><span class="s1"> 
</span><span class="s5">//                                                        continue;</span><span class="s1"> 
</span><span class="s5">//                                                        if (localObject.equals(&quot;.gif&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                                                            i = 10;</span><span class="s1"> 
</span><span class="s5">//                                                            continue;</span><span class="s1"> 
</span><span class="s5">//                                                            if (localObject.equals(&quot;.xls&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                                                                i = 11;</span><span class="s1"> 
</span><span class="s5">//                                                                continue;</span><span class="s1"> 
</span><span class="s5">//                                                                if (localObject.equals(&quot;.xlsx&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                                                                    i = 12;</span><span class="s1"> 
</span><span class="s5">//                                                                    continue;</span><span class="s1"> 
</span><span class="s5">//                                                                    if (localObject.equals(&quot;.pptx&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                                                                        i = 13;</span><span class="s1"> 
</span><span class="s5">//                                                                        continue;</span><span class="s1"> 
</span><span class="s5">//                                                                        if (localObject.equals(&quot;.ppt&quot;)) {</span><span class="s1"> 
</span><span class="s5">//                                                                            i = 14;</span><span class="s1"> 
</span><span class="s5">//                                                                        }</span><span class="s1"> 
</span><span class="s5">//                                                                    }</span><span class="s1"> 
</span><span class="s5">//                                                                }</span><span class="s1"> 
</span><span class="s5">//                                                            }</span><span class="s1"> 
</span><span class="s5">//                                                        }</span><span class="s1"> 
</span><span class="s5">//                                                    }</span><span class="s1"> 
</span><span class="s5">//                                                }</span><span class="s1"> 
</span><span class="s5">//                                            }</span><span class="s1"> 
</span><span class="s5">//                                        }</span><span class="s1"> 
</span><span class="s5">//                                    }</span><span class="s1"> 
</span><span class="s5">//                                }</span><span class="s1"> 
</span><span class="s5">//                            }</span><span class="s1"> 
</span><span class="s5">//                        }</span><span class="s1"> 
</span><span class="s5">//                    }</span><span class="s1"> 
</span><span class="s5">//                }</span><span class="s1"> 
</span><span class="s5">//                break;</span><span class="s1"> 
</span><span class="s5">//            }</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130838663));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130838663));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130839478));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130839478));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130839620));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130839620));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130838671));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130838671));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130838680));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130838680));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130838680));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130838680));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130839217));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130839217));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130838671));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130838671));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130839217));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130839217));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130839217));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130839217));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130839217));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130839217));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130838658));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130838658));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130838658));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130838658));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130838673));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130838673));</span><span class="s1"> 
</span><span class="s5">//        return;</span><span class="s1"> 
</span><span class="s5">//        if (Build.VERSION.SDK_INT &gt;= 21) {</span><span class="s1"> 
</span><span class="s5">//            this.otherFile.setImageDrawable(getDrawable(2130838673));</span><span class="s1"> 
</span><span class="s5">//            return;</span><span class="s1"> 
</span><span class="s5">//        }</span><span class="s1"> 
</span><span class="s5">//        this.otherFile.setImageDrawable(getResources().getDrawable(2130838673));</span><span class="s1"> 
</span><span class="s5">//    }</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">private void </span><span class="s1">startRecording</span><span class="s2">() {</span><span class="s1"> 
        recorder </span><span class="s2">= </span><span class="s0">new </span><span class="s1">MediaRecorder</span><span class="s2">();</span><span class="s1"> 
        recorder</span><span class="s2">.</span><span class="s1">setAudioSource</span><span class="s2">(</span><span class="s1">MediaRecorder</span><span class="s2">.</span><span class="s1">AudioSource</span><span class="s2">.</span><span class="s1">MIC</span><span class="s2">);</span><span class="s1"> 
        recorder</span><span class="s2">.</span><span class="s1">setOutputFormat</span><span class="s2">(</span><span class="s1">MediaRecorder</span><span class="s2">.</span><span class="s1">AudioEncoder</span><span class="s2">.</span><span class="s1">AMR_WB</span><span class="s2">);</span><span class="s1"> 
        recorder</span><span class="s2">.</span><span class="s1">setAudioEncoder</span><span class="s2">(</span><span class="s1">MediaRecorder</span><span class="s2">.</span><span class="s1">AudioEncoder</span><span class="s2">.</span><span class="s1">AAC</span><span class="s2">);</span><span class="s1"> 
        recorder</span><span class="s2">.</span><span class="s1">setMaxDuration</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">AUDIO_LENGTH</span><span class="s2">);</span><span class="s1"> 
        recorder</span><span class="s2">.</span><span class="s1">setMaxFileSize</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">FILE_LENGTH</span><span class="s2">);</span><span class="s1"> 
        MediaRecorder localMediaRecorder </span><span class="s2">= </span><span class="s1">recorder</span><span class="s2">;</span><span class="s1"> 
        String str </span><span class="s2">= </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">getFilename</span><span class="s2">();</span><span class="s1"> 
        fileAudioSource </span><span class="s2">= </span><span class="s1">str</span><span class="s2">;</span><span class="s1"> 
        localMediaRecorder</span><span class="s2">.</span><span class="s1">setOutputFile</span><span class="s2">(</span><span class="s1">str</span><span class="s2">);</span><span class="s1"> 
        recorder</span><span class="s2">.</span><span class="s1">setOnErrorListener</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">ERROR_LISTENER</span><span class="s2">);</span><span class="s1"> 
        recorder</span><span class="s2">.</span><span class="s1">setOnInfoListener</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">INFO_LISTENER</span><span class="s2">);</span><span class="s1"> 
        </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
            recorder</span><span class="s2">.</span><span class="s1">prepare</span><span class="s2">();</span><span class="s1"> 
            recorder</span><span class="s2">.</span><span class="s1">start</span><span class="s2">();</span><span class="s1"> 
            holder</span><span class="s2">.</span><span class="s1">getFloatMsgOptions</span><span class="s2">().</span><span class="s1">performHapticFeedback</span><span class="s2">(</span><span class="s3">20</span><span class="s2">);</span><span class="s1"> 
        </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">IllegalStateException </span><span class="s2">| </span><span class="s1">IOException localIllegalStateException</span><span class="s2">) {</span><span class="s1"> 
            AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">localIllegalStateException</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">());</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">private void </span><span class="s1">stopRecording</span><span class="s2">() {</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">recorder </span><span class="s2">!= </span><span class="s0">null</span><span class="s2">) {</span><span class="s1"> 
            AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s4">&quot;testing&quot;</span><span class="s2">);</span><span class="s1"> 
            recorder</span><span class="s2">.</span><span class="s1">stop</span><span class="s2">();</span><span class="s1"> 
            recorder</span><span class="s2">.</span><span class="s1">reset</span><span class="s2">();</span><span class="s1"> 
            recorder</span><span class="s2">.</span><span class="s1">release</span><span class="s2">();</span><span class="s1"> 
            recorder </span><span class="s2">= </span><span class="s0">null</span><span class="s2">;</span><span class="s1"> 
            File localFile </span><span class="s2">= </span><span class="s0">new </span><span class="s1">File</span><span class="s2">(</span><span class="s1">fileAudioSource</span><span class="s2">);</span><span class="s1"> 
            RequestBody localRequestBody </span><span class="s2">= </span><span class="s1">RequestBody</span><span class="s2">.</span><span class="s1">create</span><span class="s2">(</span><span class="s1">MediaType</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">(</span><span class="s4">&quot;multipart/form-data&quot;</span><span class="s2">), </span><span class="s1">localFile</span><span class="s2">);</span><span class="s1"> 
            bodyAudio </span><span class="s2">= </span><span class="s1">MultipartBody</span><span class="s2">.</span><span class="s1">Part</span><span class="s2">.</span><span class="s1">createFormData</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">audio_key</span><span class="s2">), </span><span class="s1">localFile</span><span class="s2">.</span><span class="s1">getName</span><span class="s2">(), </span><span class="s1">localRequestBody</span><span class="s2">);</span><span class="s1"> 
            AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">localFile</span><span class="s2">.</span><span class="s1">getAbsolutePath</span><span class="s2">());</span><span class="s1"> 
            AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s4">&quot;testing&quot; </span><span class="s2">+ </span><span class="s1">fileAudioSource </span><span class="s2">+ </span><span class="s1">localFile</span><span class="s2">.</span><span class="s1">getPath</span><span class="s2">());</span><span class="s1"> 
            holder</span><span class="s2">.</span><span class="s1">getReplyMsgEditText</span><span class="s2">().</span><span class="s1">setText</span><span class="s2">(</span><span class="s4">&quot;Check Audio Attached&quot;</span><span class="s2">);</span><span class="s1"> 
            sendMsg</span><span class="s2">();</span><span class="s1"> 
            AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;Audio Send&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
            holder</span><span class="s2">.</span><span class="s1">getFloatMsgOptions</span><span class="s2">().</span><span class="s1">performHapticFeedback</span><span class="s2">(</span><span class="s3">20</span><span class="s2">);</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">public void </span><span class="s1">attachFile</span><span class="s2">(</span><span class="s1">View view</span><span class="s2">) {</span><span class="s1"> 
        </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
            DialogProperties properties </span><span class="s2">= </span><span class="s0">new </span><span class="s1">DialogProperties</span><span class="s2">();</span><span class="s1"> 
            properties</span><span class="s2">.</span><span class="s1">selection_mode </span><span class="s2">= </span><span class="s1">DialogConfigs</span><span class="s2">.</span><span class="s1">SINGLE_MODE</span><span class="s2">;</span><span class="s1"> 
            properties</span><span class="s2">.</span><span class="s1">selection_type </span><span class="s2">= </span><span class="s1">DialogConfigs</span><span class="s2">.</span><span class="s1">FILE_SELECT</span><span class="s2">;</span><span class="s1"> 
            properties</span><span class="s2">.</span><span class="s1">root </span><span class="s2">= </span><span class="s0">new </span><span class="s1">File</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">PATH_FILE</span><span class="s2">);</span><span class="s1"> 
            properties</span><span class="s2">.</span><span class="s1">error_dir </span><span class="s2">= </span><span class="s0">new </span><span class="s1">File</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">PATH_FILE</span><span class="s2">);</span><span class="s1"> 
            properties</span><span class="s2">.</span><span class="s1">offset </span><span class="s2">= </span><span class="s0">new </span><span class="s1">File</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">PATH_FILE</span><span class="s2">);</span><span class="s1"> 
            properties</span><span class="s2">.</span><span class="s1">extensions </span><span class="s2">= </span><span class="s0">new </span><span class="s1">String</span><span class="s2">[]{</span><span class="s4">&quot;.doc&quot;</span><span class="s2">, </span><span class="s4">&quot;.docx&quot;</span><span class="s2">, </span><span class="s4">&quot;.pdf&quot;</span><span class="s2">, </span><span class="s4">&quot;.jpg&quot;</span><span class="s2">, </span><span class="s4">&quot;.png&quot;</span><span class="s2">, </span><span class="s4">&quot;.aspx&quot;</span><span class="s1"> 
                    </span><span class="s2">, </span><span class="s4">&quot;.jpeg&quot;</span><span class="s2">, </span><span class="s4">&quot;.mp3&quot;</span><span class="s2">, </span><span class="s4">&quot;.mp4&quot;</span><span class="s2">, </span><span class="s4">&quot;.bmp&quot;</span><span class="s2">, </span><span class="s4">&quot;.gif&quot;</span><span class="s2">, </span><span class="s4">&quot;.xls&quot;</span><span class="s2">, </span><span class="s4">&quot;.xlsx&quot;</span><span class="s2">, </span><span class="s4">&quot;.ppt&quot;</span><span class="s2">, </span><span class="s4">&quot;.pptx&quot;</span><span class="s2">};</span><span class="s1"> 
            FilePickerDialog views </span><span class="s2">= </span><span class="s0">new </span><span class="s1">FilePickerDialog</span><span class="s2">(</span><span class="s0">this</span><span class="s2">, </span><span class="s1">properties</span><span class="s2">);</span><span class="s1"> 
            views</span><span class="s2">.</span><span class="s1">setTitle</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">select_file</span><span class="s2">));</span><span class="s1"> 
            views</span><span class="s2">.</span><span class="s1">setDialogSelectionListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">DialogSelectionListener</span><span class="s2">() {</span><span class="s1"> 
                </span><span class="s0">public void </span><span class="s1">onSelectedFilePaths</span><span class="s2">(</span><span class="s1">String</span><span class="s2">[] </span><span class="s1">arrayOfString</span><span class="s2">) {</span><span class="s1"> 
                    </span><span class="s0">if </span><span class="s2">(</span><span class="s1">InternetConnection</span><span class="s2">.</span><span class="s1">checkConnection</span><span class="s2">(</span><span class="s1">context</span><span class="s2">))</span><span class="s1"> 
                        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">arrayOfString</span><span class="s2">.</span><span class="s1">length </span><span class="s2">&gt; </span><span class="s3">0</span><span class="s2">) {</span><span class="s1"> 
                            AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s4">&quot;onSelectedFilePaths: &quot; </span><span class="s2">+ </span><span class="s1">Arrays</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">(</span><span class="s1">arrayOfString</span><span class="s2">));</span><span class="s1"> 
                            File file </span><span class="s2">= </span><span class="s0">new </span><span class="s1">File</span><span class="s2">(</span><span class="s1">arrayOfString</span><span class="s2">[</span><span class="s3">0</span><span class="s2">]);</span><span class="s1"> 
                            </span><span class="s0">long </span><span class="s1">fileSizeInBytes </span><span class="s2">= </span><span class="s1">file</span><span class="s2">.</span><span class="s1">length</span><span class="s2">();</span><span class="s1"> 
                            AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">fileSizeInBytes </span><span class="s2">+ </span><span class="s4">&quot;&quot;</span><span class="s2">);</span><span class="s1"> 
                            </span><span class="s5">// Convert the bytes to Kilobytes (1 KB = 1024 Bytes)</span><span class="s1"> 
                            </span><span class="s0">long </span><span class="s1">fileSizeInKB </span><span class="s2">= </span><span class="s1">fileSizeInBytes </span><span class="s2">/ </span><span class="s3">1024</span><span class="s2">;</span><span class="s1"> 
                            AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">fileSizeInKB </span><span class="s2">+ </span><span class="s4">&quot;&quot;</span><span class="s2">);</span><span class="s1"> 
                            </span><span class="s5">// Convert the KB to MegaBytes (1 MB = 1024 KBytes)</span><span class="s1"> 
                            </span><span class="s0">long </span><span class="s1">fileSizeInMB </span><span class="s2">= </span><span class="s1">fileSizeInKB </span><span class="s2">/ </span><span class="s3">1024</span><span class="s2">;</span><span class="s1"> 
                            AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">fileSizeInMB </span><span class="s2">+ </span><span class="s4">&quot;&quot;</span><span class="s2">);</span><span class="s1"> 
                            </span><span class="s0">if </span><span class="s2">(</span><span class="s1">fileSizeInMB </span><span class="s2">&lt;= </span><span class="s3">2</span><span class="s2">) {</span><span class="s1"> 
                                RequestBody localRequestBody </span><span class="s2">= </span><span class="s1">RequestBody 
                                        </span><span class="s2">.</span><span class="s1">create</span><span class="s2">(</span><span class="s1">MediaType</span><span class="s2">.</span><span class="s1">parse</span><span class="s2">(</span><span class="s4">&quot;multipart/form-data&quot;</span><span class="s2">), </span><span class="s1">file</span><span class="s2">);</span><span class="s1"> 
                                bodyFile </span><span class="s2">= </span><span class="s1">MultipartBody</span><span class="s2">.</span><span class="s1">Part</span><span class="s2">.</span><span class="s1">createFormData</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">data_key</span><span class="s2">)</span><span class="s1"> 
                                        </span><span class="s2">, </span><span class="s1">file</span><span class="s2">.</span><span class="s1">getName</span><span class="s2">()</span><span class="s1"> 
                                        </span><span class="s2">, </span><span class="s1">localRequestBody</span><span class="s2">);</span><span class="s1"> 
                                holder</span><span class="s2">.</span><span class="s1">getReplyMsgEditText</span><span class="s2">().</span><span class="s1">setText</span><span class="s2">(</span><span class="s4">&quot;Check File Attached&quot;</span><span class="s2">);</span><span class="s1"> 
                                sendMsg</span><span class="s2">();</span><span class="s1"> 
                                AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;File Send&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                                holder</span><span class="s2">.</span><span class="s1">getFloatMsgOptions</span><span class="s2">().</span><span class="s1">performHapticFeedback</span><span class="s2">(</span><span class="s3">20</span><span class="s2">);</span><span class="s1"> 
                            </span><span class="s2">} </span><span class="s0">else </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;File size is exceed only 2MB is applicable&quot;</span><span class="s1"> 
                                    </span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                        </span><span class="s2">} </span><span class="s0">else </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;No File Selected&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                    </span><span class="s0">else</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">NET_NOT_AVAILABLE</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
            </span><span class="s2">});</span><span class="s1"> 
            views</span><span class="s2">.</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
        </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">RuntimeException e</span><span class="s2">) {</span><span class="s1"> 
            AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">());</span><span class="s1"> 
            AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">(), </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">void </span><span class="s1">data</span><span class="s2">() {</span><span class="s1"> 
        IReply iReply </span><span class="s2">= </span><span class="s1">OfficeBotURI</span><span class="s2">.</span><span class="s1">retrofit</span><span class="s2">().</span><span class="s1">create</span><span class="s2">(</span><span class="s1">IReply</span><span class="s2">.</span><span class="s0">class</span><span class="s2">);</span><span class="s1"> 
        HashMap</span><span class="s2">&lt;</span><span class="s1">String</span><span class="s2">, </span><span class="s1">Object</span><span class="s2">&gt; </span><span class="s1">map </span><span class="s2">= </span><span class="s0">new </span><span class="s1">HashMap</span><span class="s2">&lt;&gt;();</span><span class="s1"> 
        map</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">user_id_key</span><span class="s2">), </span><span class="s1">OBSession</span><span class="s2">.</span><span class="s1">getPreference</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">id_key</span><span class="s2">), </span><span class="s1">context</span><span class="s2">));</span><span class="s1"> 
        map</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">message_id_key</span><span class="s2">), </span><span class="s1">bundle</span><span class="s2">.</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">MSG_ID_BUNDLE</span><span class="s2">)));</span><span class="s1"> 
        retrofit2</span><span class="s2">.</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Message</span><span class="s2">&gt; </span><span class="s1">call </span><span class="s2">= </span><span class="s1">iReply</span><span class="s2">.</span><span class="s1">getDetailReplies</span><span class="s2">(</span><span class="s1">map</span><span class="s2">);</span><span class="s1"> 
        call</span><span class="s2">.</span><span class="s1">enqueue</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Callback</span><span class="s2">&lt;</span><span class="s1">Message</span><span class="s2">&gt;() {</span><span class="s1"> 
            </span><span class="s0">public void </span><span class="s1">onFailure</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Message</span><span class="s2">&gt; </span><span class="s1">callback</span><span class="s2">, </span><span class="s1">Throwable t</span><span class="s2">) {</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;Net Not Available&quot; </span><span class="s2">+ </span><span class="s1">t</span><span class="s2">.</span><span class="s1">getCause</span><span class="s2">(), </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getReplyListRefreshList</span><span class="s2">().</span><span class="s1">setRefreshing</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">());</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
 
            @RequiresApi </span><span class="s2">(</span><span class="s1">api </span><span class="s2">= </span><span class="s1">Build</span><span class="s2">.</span><span class="s1">VERSION_CODES</span><span class="s2">.</span><span class="s1">KITKAT</span><span class="s2">)</span><span class="s1"> 
            </span><span class="s0">public void </span><span class="s1">onResponse</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Message</span><span class="s2">&gt; </span><span class="s1">callback 
                    </span><span class="s2">, </span><span class="s1">Response</span><span class="s2">&lt;</span><span class="s1">Message</span><span class="s2">&gt; </span><span class="s1">response</span><span class="s2">) {</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">() + </span><span class="s4">&quot;</span><span class="s3">\n</span><span class="s4">&quot; </span><span class="s2">+ </span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">());</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">() == </span><span class="s3">200</span><span class="s2">) {</span><span class="s1"> 
                    </span><span class="s0">if </span><span class="s2">(!</span><span class="s1">replyArray</span><span class="s2">.</span><span class="s1">isEmpty</span><span class="s2">()) {</span><span class="s1"> 
                        replyArray</span><span class="s2">.</span><span class="s1">clear</span><span class="s2">();</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
                    msg </span><span class="s2">= </span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">();</span><span class="s1"> 
</span><span class="s5">//                    replyArray = msg.getReplies();</span><span class="s1"> 
</span><span class="s5">//                    adapter.clear();</span><span class="s1"> 
</span><span class="s5">//                    adapter.addAll(replyArray);</span><span class="s1"> 
                    </span><span class="s0">new </span><span class="s1">Delete</span><span class="s2">().</span><span class="s1">from</span><span class="s2">(</span><span class="s1">Reply</span><span class="s2">.</span><span class="s0">class</span><span class="s2">).</span><span class="s1">where</span><span class="s2">(</span><span class="s4">&quot;message_id = ?&quot;</span><span class="s2">, </span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getMsgId</span><span class="s2">()).</span><span class="s1">execute</span><span class="s2">();</span><span class="s1"> 
                    ActiveAndroid</span><span class="s2">.</span><span class="s1">beginTransaction</span><span class="s2">();</span><span class="s1"> 
                    </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
                        </span><span class="s0">for </span><span class="s2">(</span><span class="s1">Reply temp </span><span class="s2">: </span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">().</span><span class="s1">getReplies</span><span class="s2">()) {</span><span class="s1"> 
                            Reply item </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Reply</span><span class="s2">(</span><span class="s1">temp</span><span class="s2">);</span><span class="s1"> 
                            item</span><span class="s2">.</span><span class="s1">save</span><span class="s2">();</span><span class="s1"> 
                        </span><span class="s2">}</span><span class="s1"> 
                        ActiveAndroid</span><span class="s2">.</span><span class="s1">setTransactionSuccessful</span><span class="s2">();</span><span class="s1"> 
                    </span><span class="s2">} </span><span class="s0">finally </span><span class="s2">{</span><span class="s1"> 
                        ActiveAndroid</span><span class="s2">.</span><span class="s1">endTransaction</span><span class="s2">();</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
                    adapter</span><span class="s2">.</span><span class="s1">clear</span><span class="s2">();</span><span class="s1"> 
                    adapter</span><span class="s2">.</span><span class="s1">addAll</span><span class="s2">(</span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getMsgId</span><span class="s2">());</span><span class="s1"> 
                    </span><span class="s0">if </span><span class="s2">((</span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getAudio_src</span><span class="s2">() != </span><span class="s0">null</span><span class="s2">) &amp;&amp; (!</span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getAudio_src</span><span class="s2">().</span><span class="s1">isEmpty</span><span class="s2">())) {</span><span class="s1"> 
                        holder</span><span class="s2">.</span><span class="s1">getFrameAudio</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">VISIBLE</span><span class="s2">);</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
                    </span><span class="s0">if </span><span class="s2">((</span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getData_src</span><span class="s2">() != </span><span class="s0">null</span><span class="s2">) &amp;&amp; (!</span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getData_src</span><span class="s2">().</span><span class="s1">isEmpty</span><span class="s2">())) {</span><span class="s1"> 
                        holder</span><span class="s2">.</span><span class="s1">getFrameOther</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">VISIBLE</span><span class="s2">);</span><span class="s1"> 
</span><span class="s5">//                        setDraw();</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
                    </span><span class="s0">if </span><span class="s2">(</span><span class="s1">Objects</span><span class="s2">.</span><span class="s1">equals</span><span class="s2">(</span><span class="s1">bundle</span><span class="s2">.</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">MSG_OWNER_BUNDLE_KEY</span><span class="s2">))</span><span class="s1"> 
                            </span><span class="s2">, </span><span class="s1">OBSession</span><span class="s2">.</span><span class="s1">getPreference</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">id_key</span><span class="s2">), </span><span class="s1">context</span><span class="s2">))) {</span><span class="s1"> 
                        holder</span><span class="s2">.</span><span class="s1">getMessageMainViewBy</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">VISIBLE</span><span class="s2">);</span><span class="s1"> 
                        holder</span><span class="s2">.</span><span class="s1">getMessageMainViewBy</span><span class="s2">().</span><span class="s1">setText</span><span class="s2">(</span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getSeen_by</span><span class="s2">()));</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
 
                </span><span class="s2">} </span><span class="s0">else</span><span class="s1"> 
                    Snackbar</span><span class="s2">.</span><span class="s1">make</span><span class="s2">(</span><span class="s1">holder</span><span class="s2">.</span><span class="s1">getReplyMsgEditText</span><span class="s2">(), </span><span class="s4">&quot;Server Offline&quot; </span><span class="s2">+ </span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">()</span><span class="s1"> 
                            </span><span class="s2">, </span><span class="s1">Snackbar</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getReplyListRefreshList</span><span class="s2">().</span><span class="s1">setRefreshing</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    @Override 
    </span><span class="s0">protected void </span><span class="s1">onResume</span><span class="s2">() {</span><span class="s1"> 
        </span><span class="s0">super</span><span class="s2">.</span><span class="s1">onResume</span><span class="s2">();</span><span class="s1"> 
        adapter</span><span class="s2">.</span><span class="s1">clear</span><span class="s2">();</span><span class="s1"> 
        adapter</span><span class="s2">.</span><span class="s1">addAll</span><span class="s2">(</span><span class="s1">Integer</span><span class="s2">.</span><span class="s1">parseInt</span><span class="s2">(</span><span class="s1">bundle</span><span class="s2">.</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">MSG_ID_BUNDLE</span><span class="s2">))));</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">public boolean </span><span class="s1">dispatchTouchEvent</span><span class="s2">(</span><span class="s1">MotionEvent ev</span><span class="s2">) {</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">ev</span><span class="s2">.</span><span class="s1">getAction</span><span class="s2">() == </span><span class="s3">0</span><span class="s2">) {</span><span class="s1"> 
            View localView </span><span class="s2">= </span><span class="s1">getCurrentFocus</span><span class="s2">();</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s2">((</span><span class="s1">localView </span><span class="s0">instanceof </span><span class="s1">EditText</span><span class="s2">)) {</span><span class="s1"> 
                Rect localRect </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Rect</span><span class="s2">();</span><span class="s1"> 
                localView</span><span class="s2">.</span><span class="s1">getGlobalVisibleRect</span><span class="s2">(</span><span class="s1">localRect</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(!</span><span class="s1">localRect</span><span class="s2">.</span><span class="s1">contains</span><span class="s2">((</span><span class="s0">int</span><span class="s2">) </span><span class="s1">ev</span><span class="s2">.</span><span class="s1">getRawX</span><span class="s2">(), (</span><span class="s0">int</span><span class="s2">) </span><span class="s1">ev</span><span class="s2">.</span><span class="s1">getRawY</span><span class="s2">())) {</span><span class="s1"> 
                    localView</span><span class="s2">.</span><span class="s1">clearFocus</span><span class="s2">();</span><span class="s1"> 
                    </span><span class="s2">((</span><span class="s1">InputMethodManager</span><span class="s2">) </span><span class="s1">getSystemService</span><span class="s2">(</span><span class="s1">Context</span><span class="s2">.</span><span class="s1">INPUT_METHOD_SERVICE</span><span class="s2">))</span><span class="s1"> 
                            </span><span class="s2">.</span><span class="s1">hideSoftInputFromWindow</span><span class="s2">(</span><span class="s1">localView</span><span class="s2">.</span><span class="s1">getWindowToken</span><span class="s2">(), </span><span class="s3">0</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s0">return super</span><span class="s2">.</span><span class="s1">dispatchTouchEvent</span><span class="s2">(</span><span class="s1">ev</span><span class="s2">);</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">public boolean </span><span class="s1">onTouch</span><span class="s2">(</span><span class="s1">View v</span><span class="s2">, </span><span class="s1">MotionEvent motionEvent</span><span class="s2">) {</span><span class="s1"> 
        </span><span class="s0">int </span><span class="s1">i </span><span class="s2">= </span><span class="s1">motionEvent</span><span class="s2">.</span><span class="s1">getAction</span><span class="s2">();</span><span class="s1"> 
</span><span class="s5">//        contentEditText.setText(&quot;Check File Attached&quot;);</span><span class="s1"> 
</span><span class="s5">//        sendMsg();</span><span class="s1"> 
</span><span class="s5">////        AppLog.toastString(&quot;File Send&quot;, getApplicationContext());</span><span class="s1"> 
        </span><span class="s0">switch </span><span class="s2">(</span><span class="s1">i</span><span class="s2">) {</span><span class="s1"> 
            </span><span class="s0">case </span><span class="s1">MotionEvent</span><span class="s2">.</span><span class="s1">ACTION_DOWN</span><span class="s2">:</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">InternetConnection</span><span class="s2">.</span><span class="s1">checkConnection</span><span class="s2">(</span><span class="s1">context</span><span class="s2">))</span><span class="s1"> 
                    </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
                        Progress</span><span class="s2">.</span><span class="s1">Show</span><span class="s2">(</span><span class="s0">this</span><span class="s2">.</span><span class="s1">context</span><span class="s2">, </span><span class="s4">&quot;Recording..&quot;</span><span class="s2">);</span><span class="s1"> 
                        startRecording</span><span class="s2">();</span><span class="s1"> 
                    </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">IllegalStateException e</span><span class="s2">) {</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">());</span><span class="s1"> 
                    </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">RuntimeException e1</span><span class="s2">) {</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">e1</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">());</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
                </span><span class="s0">else </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">NET_NOT_AVAILABLE</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                </span><span class="s0">break</span><span class="s2">;</span><span class="s1"> 
            </span><span class="s0">case </span><span class="s1">MotionEvent</span><span class="s2">.</span><span class="s1">ACTION_UP</span><span class="s2">:</span><span class="s1"> 
                </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
                    Progress</span><span class="s2">.</span><span class="s1">Cancel</span><span class="s2">();</span><span class="s1"> 
                    stopRecording</span><span class="s2">();</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">IllegalStateException e</span><span class="s2">) {</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
</span><span class="s5">//                    AppLog.logString(e.getMessage());</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">RuntimeException e1</span><span class="s2">) {</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
</span><span class="s5">//                    AppLog.logString(e1.getMessage());</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
                </span><span class="s0">break</span><span class="s2">;</span><span class="s1"> 
            </span><span class="s0">case </span><span class="s1">MotionEvent</span><span class="s2">.</span><span class="s1">ACTION_MOVE</span><span class="s2">:</span><span class="s1"> 
                </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
                    Progress</span><span class="s2">.</span><span class="s1">Cancel</span><span class="s2">();</span><span class="s1"> 
                    </span><span class="s0">if </span><span class="s2">(</span><span class="s1">recorder </span><span class="s2">!= </span><span class="s0">null</span><span class="s2">) {</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s4">&quot;testingMove&quot;</span><span class="s2">);</span><span class="s1"> 
                        recorder</span><span class="s2">.</span><span class="s1">stop</span><span class="s2">();</span><span class="s1"> 
                        recorder</span><span class="s2">.</span><span class="s1">reset</span><span class="s2">();</span><span class="s1"> 
                        recorder</span><span class="s2">.</span><span class="s1">release</span><span class="s2">();</span><span class="s1"> 
                        recorder </span><span class="s2">= </span><span class="s0">null</span><span class="s2">;</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Audio Cancel&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">IllegalStateException e</span><span class="s2">) {</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
</span><span class="s5">//                    AppLog.logString(e.getMessage());</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">RuntimeException e1</span><span class="s2">) {</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
</span><span class="s5">//                    AppLog.logString(e1.getMessage());</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
                </span><span class="s0">break</span><span class="s2">;</span><span class="s1"> 
            </span><span class="s0">default</span><span class="s2">:</span><span class="s1"> 
                </span><span class="s0">break</span><span class="s2">;</span><span class="s1"> 
 
        </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s0">return false</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">void </span><span class="s1">setListener</span><span class="s2">() {</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getReplyListRefreshList</span><span class="s2">().</span><span class="s1">setOnRefreshListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">OnRefreshListener</span><span class="s2">() {</span><span class="s1"> 
            </span><span class="s0">public void </span><span class="s1">onRefresh</span><span class="s2">() {</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">InternetConnection</span><span class="s2">.</span><span class="s1">checkConnection</span><span class="s2">(</span><span class="s1">getApplicationContext</span><span class="s2">())) {</span><span class="s1"> 
                    data</span><span class="s2">();</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;Net Not Available&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                    holder</span><span class="s2">.</span><span class="s1">getReplyListRefreshList</span><span class="s2">().</span><span class="s1">setRefreshing</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getReplyListRefreshList</span><span class="s2">().</span><span class="s1">setOnLongClickListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">OnLongClickListener</span><span class="s2">() {</span><span class="s1"> 
            </span><span class="s0">public boolean </span><span class="s1">onLongClick</span><span class="s2">(</span><span class="s1">View paramAnonymousView</span><span class="s2">) {</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getReplyListRefreshList</span><span class="s2">().</span><span class="s1">setRefreshing</span><span class="s2">(</span><span class="s0">true</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">InternetConnection</span><span class="s2">.</span><span class="s1">checkConnection</span><span class="s2">(</span><span class="s1">getApplicationContext</span><span class="s2">())) {</span><span class="s1"> 
                    data</span><span class="s2">();</span><span class="s1"> 
                    </span><span class="s0">return false</span><span class="s2">;</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;Net Not Available&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                    holder</span><span class="s2">.</span><span class="s1">getReplyListRefreshList</span><span class="s2">().</span><span class="s1">setRefreshing</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
                </span><span class="s0">return false</span><span class="s2">;</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getMenuItemAudio</span><span class="s2">().</span><span class="s1">setOnTouchListener</span><span class="s2">(</span><span class="s0">this</span><span class="s2">);</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getAudioSourceIcon</span><span class="s2">().</span><span class="s1">setOnClickListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">OnClickListener</span><span class="s2">() {</span><span class="s1"> 
            </span><span class="s0">public void </span><span class="s1">onClick</span><span class="s2">(</span><span class="s1">View paramAnonymousView</span><span class="s2">) {</span><span class="s1"> 
                downloader </span><span class="s2">= </span><span class="s0">new </span><span class="s1">DownloadFileFromURL</span><span class="s2">(</span><span class="s0">true</span><span class="s2">, </span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">isFilePresent</span><span class="s2">(</span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getAudio_src</span><span class="s2">())) {</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">defaultFileOpener</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">PATH_FILE </span><span class="s2">+ </span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getAudio_src</span><span class="s2">(), </span><span class="s1">context</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                    </span><span class="s0">if </span><span class="s2">(</span><span class="s1">InternetConnection</span><span class="s2">.</span><span class="s1">checkConnection</span><span class="s2">(</span><span class="s1">context</span><span class="s2">)) {</span><span class="s1"> 
                        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">downloader</span><span class="s2">.</span><span class="s1">getStatus</span><span class="s2">() != </span><span class="s1">android</span><span class="s2">.</span><span class="s1">os</span><span class="s2">.</span><span class="s1">AsyncTask</span><span class="s2">.</span><span class="s1">Status</span><span class="s2">.</span><span class="s1">RUNNING</span><span class="s2">) {</span><span class="s1"> 
                            downloader</span><span class="s2">.</span><span class="s1">execute</span><span class="s2">(</span><span class="s1">OfficeBotURI</span><span class="s2">.</span><span class="s1">getFileUrlPreFix</span><span class="s2">() + </span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getAudio_src</span><span class="s2">()</span><span class="s1"> 
                                    </span><span class="s2">, </span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getAudio_src</span><span class="s2">());</span><span class="s1"> 
                        </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                            AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">PLEASE_WAIT 
                                    </span><span class="s2">, </span><span class="s1">context</span><span class="s2">);</span><span class="s1"> 
                        </span><span class="s2">}</span><span class="s1"> 
                    </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">NET_NOT_AVAILABLE 
                                </span><span class="s2">, </span><span class="s1">context</span><span class="s2">);</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getFileSourceIcon</span><span class="s2">().</span><span class="s1">setOnClickListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">OnClickListener</span><span class="s2">() {</span><span class="s1"> 
            </span><span class="s0">public void </span><span class="s1">onClick</span><span class="s2">(</span><span class="s1">View paramAnonymousView</span><span class="s2">) {</span><span class="s1"> 
                downloader </span><span class="s2">= </span><span class="s0">new </span><span class="s1">DownloadFileFromURL</span><span class="s2">(</span><span class="s0">false</span><span class="s2">, </span><span class="s0">true</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">isFilePresent</span><span class="s2">(</span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getData_src</span><span class="s2">())) {</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">defaultFileOpener</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">PATH_FILE </span><span class="s2">+ </span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getData_src</span><span class="s2">(), </span><span class="s1">context</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                    </span><span class="s0">if </span><span class="s2">(</span><span class="s1">InternetConnection</span><span class="s2">.</span><span class="s1">checkConnection</span><span class="s2">(</span><span class="s1">context</span><span class="s2">)) {</span><span class="s1"> 
                        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">downloader</span><span class="s2">.</span><span class="s1">getStatus</span><span class="s2">() != </span><span class="s1">android</span><span class="s2">.</span><span class="s1">os</span><span class="s2">.</span><span class="s1">AsyncTask</span><span class="s2">.</span><span class="s1">Status</span><span class="s2">.</span><span class="s1">RUNNING</span><span class="s2">) {</span><span class="s1"> 
                            downloader</span><span class="s2">.</span><span class="s1">execute</span><span class="s2">(</span><span class="s1">OfficeBotURI</span><span class="s2">.</span><span class="s1">getFileUrlPreFix</span><span class="s2">() + </span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getData_src</span><span class="s2">()</span><span class="s1"> 
                                    </span><span class="s2">, </span><span class="s1">msg</span><span class="s2">.</span><span class="s1">getData_src</span><span class="s2">());</span><span class="s1"> 
                        </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                            AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">PLEASE_WAIT 
                                    </span><span class="s2">, </span><span class="s1">context</span><span class="s2">);</span><span class="s1"> 
                        </span><span class="s2">}</span><span class="s1"> 
 
                    </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">NET_NOT_AVAILABLE 
                                </span><span class="s2">, </span><span class="s1">context</span><span class="s2">);</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getReplyMsgEditText</span><span class="s2">().</span><span class="s1">addTextChangedListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">TextWatcher</span><span class="s2">() {</span><span class="s1"> 
            </span><span class="s0">public void </span><span class="s1">afterTextChanged</span><span class="s2">(</span><span class="s1">Editable s</span><span class="s2">) {</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(!</span><span class="s1">s</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">().</span><span class="s1">isEmpty</span><span class="s2">()) {</span><span class="s1"> 
                    holder</span><span class="s2">.</span><span class="s1">getMenuItemFile</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">GONE</span><span class="s2">);</span><span class="s1"> 
                    holder</span><span class="s2">.</span><span class="s1">getSendMsgFab</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">VISIBLE</span><span class="s2">);</span><span class="s1"> 
                    holder</span><span class="s2">.</span><span class="s1">getSendMsgFab</span><span class="s2">().</span><span class="s1">setOnMenuButtonClickListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">OnClickListener</span><span class="s2">() {</span><span class="s1"> 
                        </span><span class="s0">public void </span><span class="s1">onClick</span><span class="s2">(</span><span class="s1">View paramAnonymous2View</span><span class="s2">) {</span><span class="s1"> 
                            sendMsg</span><span class="s2">();</span><span class="s1"> 
                        </span><span class="s2">}</span><span class="s1"> 
                    </span><span class="s2">});</span><span class="s1"> 
                    </span><span class="s0">return</span><span class="s2">;</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getMenuItemFile</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">VISIBLE</span><span class="s2">);</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getSendMsgFab</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">GONE</span><span class="s2">);</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
 
            </span><span class="s0">public void </span><span class="s1">beforeTextChanged</span><span class="s2">(</span><span class="s1">CharSequence s</span><span class="s2">, </span><span class="s0">int </span><span class="s1">start</span><span class="s2">, </span><span class="s0">int </span><span class="s1">count</span><span class="s2">, </span><span class="s0">int </span><span class="s1">after</span><span class="s2">) {</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
 
            </span><span class="s0">public void </span><span class="s1">onTextChanged</span><span class="s2">(</span><span class="s1">CharSequence s</span><span class="s2">, </span><span class="s0">int </span><span class="s1">start</span><span class="s2">, </span><span class="s0">int </span><span class="s1">before</span><span class="s2">, </span><span class="s0">int </span><span class="s1">count</span><span class="s2">) {</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getRefresh</span><span class="s2">().</span><span class="s1">setOnClickListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">OnClickListener</span><span class="s2">() {</span><span class="s1"> 
            @Override 
            </span><span class="s0">public void </span><span class="s1">onClick</span><span class="s2">(</span><span class="s1">View v</span><span class="s2">) {</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getReplyListRefreshList</span><span class="s2">().</span><span class="s1">performLongClick</span><span class="s2">();</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    @TargetApi </span><span class="s2">(</span><span class="s1">Build</span><span class="s2">.</span><span class="s1">VERSION_CODES</span><span class="s2">.</span><span class="s1">KITKAT</span><span class="s2">)</span><span class="s1"> 
    </span><span class="s0">void </span><span class="s1">setUi</span><span class="s2">() {</span><span class="s1"> 
        bundle </span><span class="s2">= </span><span class="s1">getIntent</span><span class="s2">().</span><span class="s1">getBundleExtra</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">MSG_KEY</span><span class="s2">));</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getAudioProgress</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">GONE</span><span class="s2">);</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getOtherFileProgress</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">GONE</span><span class="s2">);</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">Objects</span><span class="s2">.</span><span class="s1">equals</span><span class="s2">(</span><span class="s1">bundle</span><span class="s2">.</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">MSG_OWNER_BUNDLE_KEY</span><span class="s2">)), </span><span class="s1">OBSession</span><span class="s2">.</span><span class="s1">getPreference</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">id_key</span><span class="s2">), </span><span class="s0">this</span><span class="s2">))) {</span><span class="s1"> 
            AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s4">&quot;equal&quot;</span><span class="s2">);</span><span class="s1"> 
            holder</span><span class="s2">.</span><span class="s1">getMessageOwnerName</span><span class="s2">().</span><span class="s1">setText</span><span class="s2">(</span><span class="s1">OBSession</span><span class="s2">.</span><span class="s1">getPreference</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">name_key</span><span class="s2">), </span><span class="s0">this</span><span class="s2">));</span><span class="s1"> 
        </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
            holder</span><span class="s2">.</span><span class="s1">getMessageOwnerName</span><span class="s2">().</span><span class="s1">setText</span><span class="s2">(</span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">SearchUser</span><span class="s2">.</span><span class="s1">getNameUserOther</span><span class="s2">(</span><span class="s1">Integer</span><span class="s2">.</span><span class="s1">parseInt</span><span class="s2">(</span><span class="s1">bundle</span><span class="s2">.</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">MSG_OWNER_BUNDLE_KEY</span><span class="s2">))))));</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">holder</span><span class="s2">.</span><span class="s1">getMessageOwnerName</span><span class="s2">().</span><span class="s1">getText</span><span class="s2">().</span><span class="s1">length</span><span class="s2">() &gt; </span><span class="s3">8</span><span class="s2">) {</span><span class="s1"> 
            holder</span><span class="s2">.</span><span class="s1">getMessageOwnerName</span><span class="s2">().</span><span class="s1">setTextSize</span><span class="s2">(</span><span class="s3">2</span><span class="s2">, </span><span class="s3">10.0F</span><span class="s2">);</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getMessageMainTime</span><span class="s2">().</span><span class="s1">setText</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">getPretty</span><span class="s2">(</span><span class="s1">bundle</span><span class="s2">.</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">MSG_TIME_BUNDLE_KEY</span><span class="s2">)), </span><span class="s1">context</span><span class="s2">));</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">holder</span><span class="s2">.</span><span class="s1">getMessageMainTime</span><span class="s2">().</span><span class="s1">getText</span><span class="s2">().</span><span class="s1">length</span><span class="s2">() &gt; </span><span class="s3">8</span><span class="s2">) {</span><span class="s1"> 
            holder</span><span class="s2">.</span><span class="s1">getMessageMainTime</span><span class="s2">().</span><span class="s1">setTextSize</span><span class="s2">(</span><span class="s3">2</span><span class="s2">, </span><span class="s3">8.0F</span><span class="s2">);</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getMessageMainContent</span><span class="s2">().</span><span class="s1">setText</span><span class="s2">(</span><span class="s1">bundle</span><span class="s2">.</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">MSG_CONTENT_BUNDLE_KEY</span><span class="s2">)));</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">holder</span><span class="s2">.</span><span class="s1">getMessageMainContent</span><span class="s2">().</span><span class="s1">getText</span><span class="s2">().</span><span class="s1">length</span><span class="s2">() &gt; </span><span class="s3">15</span><span class="s2">) {</span><span class="s1"> 
            holder</span><span class="s2">.</span><span class="s1">getMessageMainContent</span><span class="s2">().</span><span class="s1">setTextSize</span><span class="s2">(</span><span class="s3">2</span><span class="s2">, </span><span class="s3">12.0F</span><span class="s2">);</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getBackBtnImg</span><span class="s2">().</span><span class="s1">setOnClickListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">OnClickListener</span><span class="s2">() {</span><span class="s1"> 
            </span><span class="s0">public void </span><span class="s1">onClick</span><span class="s2">(</span><span class="s1">View v</span><span class="s2">) {</span><span class="s1"> 
                finish</span><span class="s2">();</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getMessageMainViewBy</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">GONE</span><span class="s2">);</span><span class="s1"> 
        mHoldingButtonLayout </span><span class="s2">= (</span><span class="s1">HoldingButtonLayout</span><span class="s2">) </span><span class="s1">findViewById</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">id</span><span class="s2">.</span><span class="s1">input_holder</span><span class="s2">);</span><span class="s1"> 
        mHoldingButtonLayout</span><span class="s2">.</span><span class="s1">addListener</span><span class="s2">(</span><span class="s0">this</span><span class="s2">);</span><span class="s1"> 
 
        mTime </span><span class="s2">= (</span><span class="s1">TextView</span><span class="s2">) </span><span class="s1">findViewById</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">id</span><span class="s2">.</span><span class="s1">time</span><span class="s2">);</span><span class="s1"> 
        mInput </span><span class="s2">= (</span><span class="s1">EditText</span><span class="s2">) </span><span class="s1">findViewById</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">id</span><span class="s2">.</span><span class="s1">reply_msg_edit_text</span><span class="s2">);</span><span class="s1"> 
        mSlideToCancel </span><span class="s2">= </span><span class="s1">findViewById</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">id</span><span class="s2">.</span><span class="s1">slide_to_cancel</span><span class="s2">);</span><span class="s1"> 
        mAudioIcon </span><span class="s2">= (</span><span class="s1">android</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">ImageView</span><span class="s2">) </span><span class="s1">findViewById</span><span class="s2">(</span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">R</span><span class="s2">.</span><span class="s1">id</span><span class="s2">.</span><span class="s1">start_record</span><span class="s2">);</span><span class="s1"> 
 
        mAnimationDuration </span><span class="s2">= </span><span class="s1">getResources</span><span class="s2">().</span><span class="s1">getInteger</span><span class="s2">(</span><span class="s1">android</span><span class="s2">.</span><span class="s1">R</span><span class="s2">.</span><span class="s1">integer</span><span class="s2">.</span><span class="s1">config_shortAnimTime</span><span class="s2">);</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">private class </span><span class="s1">DownloadFileFromURL 
            </span><span class="s0">extends </span><span class="s1">AsyncTask</span><span class="s2">&lt;</span><span class="s1">String</span><span class="s2">, </span><span class="s1">String</span><span class="s2">, </span><span class="s1">String</span><span class="s2">&gt; {</span><span class="s1"> 
        </span><span class="s0">static final int </span><span class="s1">BYTE_DATA_SIZE </span><span class="s2">= </span><span class="s3">1024</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s0">static final int </span><span class="s1">SIZE </span><span class="s2">= </span><span class="s3">8192</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s0">boolean </span><span class="s1">isAudio </span><span class="s2">= </span><span class="s0">false</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s0">boolean </span><span class="s1">isOther </span><span class="s2">= </span><span class="s0">false</span><span class="s2">;</span><span class="s1"> 
 <hr class="ls0">        DownloadFileFromURL</span><span class="s2">(</span><span class="s0">boolean </span><span class="s1">b</span><span class="s2">, </span><span class="s0">boolean </span><span class="s1">b1</span><span class="s2">) {</span><span class="s1"> 
            isAudio </span><span class="s2">= </span><span class="s1">b</span><span class="s2">;</span><span class="s1"> 
            isOther </span><span class="s2">= </span><span class="s1">b1</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">        @Nullable 
        </span><span class="s0">protected </span><span class="s1">String doInBackground</span><span class="s2">(</span><span class="s1">String... strings</span><span class="s2">) {</span><span class="s1"> 
            </span><span class="s0">int </span><span class="s1">count</span><span class="s2">;</span><span class="s1"> 
            </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
                URL url </span><span class="s2">= </span><span class="s0">new </span><span class="s1">URL</span><span class="s2">(</span><span class="s1">strings</span><span class="s2">[</span><span class="s3">0</span><span class="s2">]);</span><span class="s1"> 
                URLConnection conection </span><span class="s2">= </span><span class="s1">url</span><span class="s2">.</span><span class="s1">openConnection</span><span class="s2">();</span><span class="s1"> 
                conection</span><span class="s2">.</span><span class="s1">connect</span><span class="s2">();</span><span class="s1"> 
                </span><span class="s5">// getting file length</span><span class="s1"> 
                </span><span class="s0">int </span><span class="s1">lenghtOfFile </span><span class="s2">= </span><span class="s1">conection</span><span class="s2">.</span><span class="s1">getContentLength</span><span class="s2">();</span><span class="s1"> 
 
                </span><span class="s5">// input stream to read file - with 8k buffer</span><span class="s1"> 
                InputStream input </span><span class="s2">= </span><span class="s0">new </span><span class="s1">BufferedInputStream</span><span class="s2">(</span><span class="s1">url</span><span class="s2">.</span><span class="s1">openStream</span><span class="s2">(), </span><span class="s3">8192</span><span class="s2">);</span><span class="s1"> 
 
                </span><span class="s5">// Output stream to write file</span><span class="s1"> 
                OutputStream output </span><span class="s2">= </span><span class="s0">new </span><span class="s1">FileOutputStream</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">PATH_FILE </span><span class="s2">+ </span><span class="s1">strings</span><span class="s2">[</span><span class="s3">1</span><span class="s2">]);</span><span class="s1"> 
 
                </span><span class="s0">byte </span><span class="s1">data</span><span class="s2">[] = </span><span class="s0">new byte</span><span class="s2">[</span><span class="s1">BYTE_DATA_SIZE</span><span class="s2">];</span><span class="s1"> 
 
                </span><span class="s0">long </span><span class="s1">total </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span><span class="s1"> 
 
                </span><span class="s0">while </span><span class="s2">((</span><span class="s1">count </span><span class="s2">= </span><span class="s1">input</span><span class="s2">.</span><span class="s1">read</span><span class="s2">(</span><span class="s1">data</span><span class="s2">)) != -</span><span class="s3">1</span><span class="s2">) {</span><span class="s1"> 
                    total </span><span class="s2">+= </span><span class="s1">count</span><span class="s2">;</span><span class="s1"> 
                    </span><span class="s5">// publishing the progress....</span><span class="s1"> 
                    </span><span class="s5">// After this onProgressUpdate will be called</span><span class="s1"> 
                    publishProgress</span><span class="s2">(</span><span class="s4">&quot;&quot; </span><span class="s2">+ (</span><span class="s0">int</span><span class="s2">) ((</span><span class="s1">total </span><span class="s2">* </span><span class="s3">100</span><span class="s2">) / </span><span class="s1">lenghtOfFile</span><span class="s2">));</span><span class="s1"> 
 
                    </span><span class="s5">// writing data to file</span><span class="s1"> 
                    output</span><span class="s2">.</span><span class="s1">write</span><span class="s2">(</span><span class="s1">data</span><span class="s2">, </span><span class="s3">0</span><span class="s2">, </span><span class="s1">count</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
 
                </span><span class="s5">// flushing output</span><span class="s1"> 
                output</span><span class="s2">.</span><span class="s1">flush</span><span class="s2">();</span><span class="s1"> 
 
                </span><span class="s5">// closing streams</span><span class="s1"> 
                output</span><span class="s2">.</span><span class="s1">close</span><span class="s2">();</span><span class="s1"> 
                input</span><span class="s2">.</span><span class="s1">close</span><span class="s2">();</span><span class="s1"> 
 
            </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">Exception e</span><span class="s2">) {</span><span class="s1"> 
                Log</span><span class="s2">.</span><span class="s1">e</span><span class="s2">(</span><span class="s4">&quot;Error: &quot;</span><span class="s2">, </span><span class="s1">e</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">());</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">());</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">(), </span><span class="s1">context</span><span class="s2">.</span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
 
            </span><span class="s0">return null</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">        </span><span class="s0">protected void </span><span class="s1">onPostExecute</span><span class="s2">(</span><span class="s1">String paramString</span><span class="s2">) {</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s2">(</span><span class="s1">isAudio</span><span class="s2">) {</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getAudioProgress</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">GONE</span><span class="s2">);</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getAudioSourceIcon</span><span class="s2">().</span><span class="s1">setClickable</span><span class="s2">(</span><span class="s0">true</span><span class="s2">);</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;Audio Downloaded Press Again to Listen!&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s2">(</span><span class="s1">isOther</span><span class="s2">) {</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getOtherFileProgress</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">GONE</span><span class="s2">);</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getFileSourceIcon</span><span class="s2">().</span><span class="s1">setClickable</span><span class="s2">(</span><span class="s0">true</span><span class="s2">);</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s4">&quot;File Downloaded Press Again to See!&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
            AppLog</span><span class="s2">.</span><span class="s1">setVibrate</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">INTENSITY_HIGH</span><span class="s2">);</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">        </span><span class="s0">protected void </span><span class="s1">onPreExecute</span><span class="s2">() {</span><span class="s1"> 
            </span><span class="s0">super</span><span class="s2">.</span><span class="s1">onPreExecute</span><span class="s2">();</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s2">(</span><span class="s1">isAudio</span><span class="s2">) {</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getAudioSourceIcon</span><span class="s2">().</span><span class="s1">setClickable</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getAudioProgress</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">VISIBLE</span><span class="s2">);</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getAudioProgress</span><span class="s2">().</span><span class="s1">setIndeterminate</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s2">(</span><span class="s1">isOther</span><span class="s2">) {</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getFileSourceIcon</span><span class="s2">().</span><span class="s1">setClickable</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getOtherFileProgress</span><span class="s2">().</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">VISIBLE</span><span class="s2">);</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getOtherFileProgress</span><span class="s2">().</span><span class="s1">setIndeterminate</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">        </span><span class="s0">protected void </span><span class="s1">onProgressUpdate</span><span class="s2">(</span><span class="s1">String... paramVarArgs</span><span class="s2">) {</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s2">(</span><span class="s1">isAudio</span><span class="s2">) {</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getAudioProgress</span><span class="s2">().</span><span class="s1">setProgress</span><span class="s2">(</span><span class="s1">Integer</span><span class="s2">.</span><span class="s1">parseInt</span><span class="s2">(</span><span class="s1">paramVarArgs</span><span class="s2">[</span><span class="s3">0</span><span class="s2">]));</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s2">(</span><span class="s1">isOther</span><span class="s2">) {</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getOtherFileProgress</span><span class="s2">().</span><span class="s1">setProgress</span><span class="s2">(</span><span class="s1">Integer</span><span class="s2">.</span><span class="s1">parseInt</span><span class="s2">(</span><span class="s1">paramVarArgs</span><span class="s2">[</span><span class="s3">0</span><span class="s2">]));</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
 
 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    @Override 
    </span><span class="s0">public void </span><span class="s1">onBeforeExpand</span><span class="s2">() {</span><span class="s1"> 
        cancelAllAnimations</span><span class="s2">();</span><span class="s1"> 
 
        mSlideToCancel</span><span class="s2">.</span><span class="s1">setTranslationX</span><span class="s2">(</span><span class="s3">0f</span><span class="s2">);</span><span class="s1"> 
        mSlideToCancel</span><span class="s2">.</span><span class="s1">setAlpha</span><span class="s2">(</span><span class="s3">0f</span><span class="s2">);</span><span class="s1"> 
        mSlideToCancel</span><span class="s2">.</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">VISIBLE</span><span class="s2">);</span><span class="s1"> 
        mSlideToCancelAnimator </span><span class="s2">= </span><span class="s1">mSlideToCancel</span><span class="s2">.</span><span class="s1">animate</span><span class="s2">().</span><span class="s1">alpha</span><span class="s2">(</span><span class="s3">1f</span><span class="s2">).</span><span class="s1">setDuration</span><span class="s2">(</span><span class="s1">mAnimationDuration</span><span class="s2">);</span><span class="s1"> 
        mSlideToCancelAnimator</span><span class="s2">.</span><span class="s1">start</span><span class="s2">();</span><span class="s1"> 
 
        mInputAnimator </span><span class="s2">= </span><span class="s1">mInput</span><span class="s2">.</span><span class="s1">animate</span><span class="s2">().</span><span class="s1">alpha</span><span class="s2">(</span><span class="s3">0f</span><span class="s2">).</span><span class="s1">setDuration</span><span class="s2">(</span><span class="s1">mAnimationDuration</span><span class="s2">);</span><span class="s1"> 
        mInputAnimator</span><span class="s2">.</span><span class="s1">setListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">AnimatorListenerAdapter</span><span class="s2">() {</span><span class="s1"> 
            @Override 
            </span><span class="s0">public void </span><span class="s1">onAnimationEnd</span><span class="s2">(</span><span class="s1">Animator animation</span><span class="s2">) {</span><span class="s1"> 
                mInput</span><span class="s2">.</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">INVISIBLE</span><span class="s2">);</span><span class="s1"> 
                mInputAnimator</span><span class="s2">.</span><span class="s1">setListener</span><span class="s2">(</span><span class="s0">null</span><span class="s2">);</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
        mInputAnimator</span><span class="s2">.</span><span class="s1">start</span><span class="s2">();</span><span class="s1"> 
 
        mTime</span><span class="s2">.</span><span class="s1">setTranslationY</span><span class="s2">(</span><span class="s1">mTime</span><span class="s2">.</span><span class="s1">getHeight</span><span class="s2">());</span><span class="s1"> 
        mTime</span><span class="s2">.</span><span class="s1">setAlpha</span><span class="s2">(</span><span class="s3">0f</span><span class="s2">);</span><span class="s1"> 
        mTime</span><span class="s2">.</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">VISIBLE</span><span class="s2">);</span><span class="s1"> 
        mTimeAnimator </span><span class="s2">= </span><span class="s1">mTime</span><span class="s2">.</span><span class="s1">animate</span><span class="s2">().</span><span class="s1">translationY</span><span class="s2">(</span><span class="s3">0f</span><span class="s2">).</span><span class="s1">alpha</span><span class="s2">(</span><span class="s3">1f</span><span class="s2">).</span><span class="s1">setDuration</span><span class="s2">(</span><span class="s1">mAnimationDuration</span><span class="s2">);</span><span class="s1"> 
        mTimeAnimator</span><span class="s2">.</span><span class="s1">start</span><span class="s2">();</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">InternetConnection</span><span class="s2">.</span><span class="s1">checkConnection</span><span class="s2">(</span><span class="s1">context</span><span class="s2">))</span><span class="s1"> 
            </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
                startRecording</span><span class="s2">();</span><span class="s1"> 
            </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">IllegalStateException e</span><span class="s2">) {</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">e</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">());</span><span class="s1"> 
            </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">RuntimeException e1</span><span class="s2">) {</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">e1</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">());</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s0">else </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">NET_NOT_AVAILABLE</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    @Override 
    </span><span class="s0">public void </span><span class="s1">onExpand</span><span class="s2">() {</span><span class="s1"> 
        mStartTime </span><span class="s2">= </span><span class="s1">System</span><span class="s2">.</span><span class="s1">currentTimeMillis</span><span class="s2">();</span><span class="s1"> 
        invalidateTimer</span><span class="s2">();</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    @Override 
    </span><span class="s0">public void </span><span class="s1">onBeforeCollapse</span><span class="s2">() {</span><span class="s1"> 
        cancelAllAnimations</span><span class="s2">();</span><span class="s1"> 
 
        mSlideToCancelAnimator </span><span class="s2">= </span><span class="s1">mSlideToCancel</span><span class="s2">.</span><span class="s1">animate</span><span class="s2">().</span><span class="s1">alpha</span><span class="s2">(</span><span class="s3">0f</span><span class="s2">).</span><span class="s1">setDuration</span><span class="s2">(</span><span class="s1">mAnimationDuration</span><span class="s2">);</span><span class="s1"> 
        mSlideToCancelAnimator</span><span class="s2">.</span><span class="s1">setListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">android</span><span class="s2">.</span><span class="s1">animation</span><span class="s2">.</span><span class="s1">AnimatorListenerAdapter</span><span class="s2">() {</span><span class="s1"> 
            @Override 
            </span><span class="s0">public void </span><span class="s1">onAnimationEnd</span><span class="s2">(</span><span class="s1">android</span><span class="s2">.</span><span class="s1">animation</span><span class="s2">.</span><span class="s1">Animator animation</span><span class="s2">) {</span><span class="s1"> 
                mSlideToCancel</span><span class="s2">.</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">INVISIBLE</span><span class="s2">);</span><span class="s1"> 
                mSlideToCancelAnimator</span><span class="s2">.</span><span class="s1">setListener</span><span class="s2">(</span><span class="s0">null</span><span class="s2">);</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
        mSlideToCancelAnimator</span><span class="s2">.</span><span class="s1">start</span><span class="s2">();</span><span class="s1"> 
 
        mInput</span><span class="s2">.</span><span class="s1">setAlpha</span><span class="s2">(</span><span class="s3">0f</span><span class="s2">);</span><span class="s1"> 
        mInput</span><span class="s2">.</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">VISIBLE</span><span class="s2">);</span><span class="s1"> 
        mInputAnimator </span><span class="s2">= </span><span class="s1">mInput</span><span class="s2">.</span><span class="s1">animate</span><span class="s2">().</span><span class="s1">alpha</span><span class="s2">(</span><span class="s3">1f</span><span class="s2">).</span><span class="s1">setDuration</span><span class="s2">(</span><span class="s1">mAnimationDuration</span><span class="s2">);</span><span class="s1"> 
        mInputAnimator</span><span class="s2">.</span><span class="s1">start</span><span class="s2">();</span><span class="s1"> 
 
        mTimeAnimator </span><span class="s2">= </span><span class="s1">mTime</span><span class="s2">.</span><span class="s1">animate</span><span class="s2">().</span><span class="s1">translationY</span><span class="s2">(</span><span class="s1">mTime</span><span class="s2">.</span><span class="s1">getHeight</span><span class="s2">()).</span><span class="s1">alpha</span><span class="s2">(</span><span class="s3">0f</span><span class="s2">).</span><span class="s1">setDuration</span><span class="s2">(</span><span class="s1">mAnimationDuration</span><span class="s2">);</span><span class="s1"> 
        mTimeAnimator</span><span class="s2">.</span><span class="s1">setListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">android</span><span class="s2">.</span><span class="s1">animation</span><span class="s2">.</span><span class="s1">AnimatorListenerAdapter</span><span class="s2">() {</span><span class="s1"> 
            @Override 
            </span><span class="s0">public void </span><span class="s1">onAnimationEnd</span><span class="s2">(</span><span class="s1">android</span><span class="s2">.</span><span class="s1">animation</span><span class="s2">.</span><span class="s1">Animator animation</span><span class="s2">) {</span><span class="s1"> 
                mTime</span><span class="s2">.</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">INVISIBLE</span><span class="s2">);</span><span class="s1"> 
                mTimeAnimator</span><span class="s2">.</span><span class="s1">setListener</span><span class="s2">(</span><span class="s0">null</span><span class="s2">);</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
        mTimeAnimator</span><span class="s2">.</span><span class="s1">start</span><span class="s2">();</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    @Override 
    </span><span class="s0">public void </span><span class="s1">onCollapse</span><span class="s2">(</span><span class="s0">boolean </span><span class="s1">isCancel</span><span class="s2">) {</span><span class="s1"> 
        stopTimer</span><span class="s2">();</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">isCancel</span><span class="s2">) {</span><span class="s1"> 
            </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">recorder </span><span class="s2">!= </span><span class="s0">null</span><span class="s2">) {</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s4">&quot;testingMove&quot;</span><span class="s2">);</span><span class="s1"> 
                    recorder</span><span class="s2">.</span><span class="s1">stop</span><span class="s2">();</span><span class="s1"> 
                    recorder</span><span class="s2">.</span><span class="s1">reset</span><span class="s2">();</span><span class="s1"> 
                    recorder</span><span class="s2">.</span><span class="s1">release</span><span class="s2">();</span><span class="s1"> 
                    recorder </span><span class="s2">= </span><span class="s0">null</span><span class="s2">;</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Audio Cancel&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
            </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">IllegalStateException e</span><span class="s2">) {</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
</span><span class="s5">//                    AppLog.logString(e.getMessage());</span><span class="s1"> 
            </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">RuntimeException e1</span><span class="s2">) {</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
</span><span class="s5">//                    AppLog.logString(e1.getMessage());</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
            Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s0">this</span><span class="s2">, </span><span class="s4">&quot;Action canceled! Time &quot; </span><span class="s2">+ </span><span class="s1">getFormattedTime</span><span class="s2">(), </span><span class="s1">Toast</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
        </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
            </span><span class="s0">if </span><span class="s2">(</span><span class="s1">mFormatter</span><span class="s2">.</span><span class="s1">format</span><span class="s2">(</span><span class="s0">new </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">Date</span><span class="s2">(</span><span class="s1">System</span><span class="s2">.</span><span class="s1">currentTimeMillis</span><span class="s2">() - </span><span class="s1">mStartTime</span><span class="s2">)).</span><span class="s1">compareToIgnoreCase</span><span class="s2">(</span><span class="s1"> 
                    mFormatter</span><span class="s2">.</span><span class="s1">format</span><span class="s2">(</span><span class="s0">new </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">Date</span><span class="s2">(</span><span class="s1">mSecond</span><span class="s2">))</span><span class="s1"> 
            </span><span class="s2">) &gt; </span><span class="s3">0</span><span class="s2">) {</span><span class="s1"> 
                </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
                    stopRecording</span><span class="s2">();</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">IllegalStateException e</span><span class="s2">) {</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s1"> 
                            </span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">RuntimeException e1</span><span class="s2">) {</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s1"> 
                            </span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
                Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s0">this</span><span class="s2">, </span><span class="s4">&quot;Action submitted! Time &quot; </span><span class="s2">+ </span><span class="s1">getFormattedTime</span><span class="s2">(), </span><span class="s1">Toast</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
            </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s0">this</span><span class="s2">, </span><span class="s4">&quot;Please Hold More then a Second&quot;</span><span class="s2">, </span><span class="s1">Toast</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
                    </span><span class="s0">if </span><span class="s2">(</span><span class="s1">recorder </span><span class="s2">!= </span><span class="s0">null</span><span class="s2">) {</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s4">&quot;testingMove&quot;</span><span class="s2">);</span><span class="s1"> 
                        recorder</span><span class="s2">.</span><span class="s1">stop</span><span class="s2">();</span><span class="s1"> 
                        recorder</span><span class="s2">.</span><span class="s1">reset</span><span class="s2">();</span><span class="s1"> 
                        recorder</span><span class="s2">.</span><span class="s1">release</span><span class="s2">();</span><span class="s1"> 
                        recorder </span><span class="s2">= </span><span class="s0">null</span><span class="s2">;</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">IllegalStateException e</span><span class="s2">) {</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s1"> 
                    </span><span class="s2">);</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">RuntimeException e1</span><span class="s2">) {</span><span class="s1"> 
                    AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s4">&quot;Please Hold more then a Second to record&quot;</span><span class="s1"> 
                    </span><span class="s2">);</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
        mStartTime </span><span class="s2">= </span><span class="s3">0</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    @Override 
    </span><span class="s0">public void </span><span class="s1">onOffsetChanged</span><span class="s2">(</span><span class="s0">float </span><span class="s1">offset</span><span class="s2">, </span><span class="s0">boolean </span><span class="s1">isCancel</span><span class="s2">) {</span><span class="s1"> 
        mSlideToCancel</span><span class="s2">.</span><span class="s1">setTranslationX</span><span class="s2">(-</span><span class="s1">mHoldingButtonLayout</span><span class="s2">.</span><span class="s1">getWidth</span><span class="s2">() * </span><span class="s1">offset</span><span class="s2">);</span><span class="s1"> 
        mSlideToCancel</span><span class="s2">.</span><span class="s1">setAlpha</span><span class="s2">(</span><span class="s3">1 </span><span class="s2">- </span><span class="s1">SLIDE_TO_CANCEL_ALPHA_MULTIPLIER </span><span class="s2">* </span><span class="s1">offset</span><span class="s2">);</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">private void </span><span class="s1">invalidateTimer</span><span class="s2">() {</span><span class="s1"> 
        mTimerRunnable </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Runnable</span><span class="s2">() {</span><span class="s1"> 
            @Override 
            </span><span class="s0">public void </span><span class="s1">run</span><span class="s2">() {</span><span class="s1"> 
                mTime</span><span class="s2">.</span><span class="s1">setText</span><span class="s2">(</span><span class="s1">getFormattedTime</span><span class="s2">());</span><span class="s1"> 
                invalidateTimer</span><span class="s2">();</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">};</span><span class="s1"> 
 
        mTime</span><span class="s2">.</span><span class="s1">postDelayed</span><span class="s2">(</span><span class="s1">mTimerRunnable</span><span class="s2">, </span><span class="s1">TIME_INVALIDATION_FREQUENCY</span><span class="s2">);</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">private void </span><span class="s1">stopTimer</span><span class="s2">() {</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">mTimerRunnable </span><span class="s2">!= </span><span class="s0">null</span><span class="s2">) {</span><span class="s1"> 
            mTime</span><span class="s2">.</span><span class="s1">getHandler</span><span class="s2">().</span><span class="s1">removeCallbacks</span><span class="s2">(</span><span class="s1">mTimerRunnable</span><span class="s2">);</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">private void </span><span class="s1">cancelAllAnimations</span><span class="s2">() {</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">mInputAnimator </span><span class="s2">!= </span><span class="s0">null</span><span class="s2">) {</span><span class="s1"> 
            mInputAnimator</span><span class="s2">.</span><span class="s1">cancel</span><span class="s2">();</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">mSlideToCancelAnimator </span><span class="s2">!= </span><span class="s0">null</span><span class="s2">) {</span><span class="s1"> 
            mSlideToCancelAnimator</span><span class="s2">.</span><span class="s1">cancel</span><span class="s2">();</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">mTimeAnimator </span><span class="s2">!= </span><span class="s0">null</span><span class="s2">) {</span><span class="s1"> 
            mTimeAnimator</span><span class="s2">.</span><span class="s1">cancel</span><span class="s2">();</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">private </span><span class="s1">String getFormattedTime</span><span class="s2">() {</span><span class="s1"> 
        </span><span class="s0">return </span><span class="s1">mFormatter</span><span class="s2">.</span><span class="s1">format</span><span class="s2">(</span><span class="s0">new </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">Date</span><span class="s2">(</span><span class="s1">System</span><span class="s2">.</span><span class="s1">currentTimeMillis</span><span class="s2">() - </span><span class="s1">mStartTime</span><span class="s2">));</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
</span><span class="s2">}</span></pre>
</body>
</html>