<html>
<head>
<title>GroupsActivity.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.ln { color: #2b91af; font-weight: normal; font-style: normal; }
.s0 { color: rgb(0,208,208); }
.s1 { color: rgb(208,208,208); }
.s2 { color: rgb(208,208,208); }
.s3 { color: rgb(220,120,220); }
.s4 { color: rgb(255,255,0); }
.s5 { color: rgb(0,224,0); }
.ls0 { height: 1px; border-width: 0; color: rgb(32,32,48); background-color:rgb(32,32,48)}
</style>
</head>
<BODY BGCOLOR="#101020">
<TABLE CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<TR><TD><CENTER>
<FONT FACE="Arial, Helvetica" COLOR="#000000">
GroupsActivity.java</FONT>
</center></TD></TR></TABLE>
<pre>
<span class="s0">package </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">activities</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">content</span><span class="s2">.</span><span class="s1">DialogInterface</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">os</span><span class="s2">.</span><span class="s1">Bundle</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">support</span><span class="s2">.</span><span class="s1">annotation</span><span class="s2">.</span><span class="s1">NonNull</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">support</span><span class="s2">.</span><span class="s1">design</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">Snackbar</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">support</span><span class="s2">.</span><span class="s1">v4</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">SwipeRefreshLayout</span><span class="s2">.</span><span class="s1">OnRefreshListener</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">support</span><span class="s2">.</span><span class="s1">v7</span><span class="s2">.</span><span class="s1">app</span><span class="s2">.</span><span class="s1">AlertDialog</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">support</span><span class="s2">.</span><span class="s1">v7</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">LinearLayoutManager</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">support</span><span class="s2">.</span><span class="s1">v7</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">RecyclerView</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">Log</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">ContextMenu</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">ContextMenu</span><span class="s2">.</span><span class="s1">ContextMenuInfo</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">LayoutInflater</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">Menu</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">MenuItem</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">View</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">View</span><span class="s2">.</span><span class="s1">OnLongClickListener</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">animation</span><span class="s2">.</span><span class="s1">AlphaAnimation</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">view</span><span class="s2">.</span><span class="s1">animation</span><span class="s2">.</span><span class="s1">TranslateAnimation</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">EditText</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">ExpandableListView</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">android</span><span class="s2">.</span><span class="s1">widget</span><span class="s2">.</span><span class="s1">Toast</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">activeandroid</span><span class="s2">.</span><span class="s1">ActiveAndroid</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">activeandroid</span><span class="s2">.</span><span class="s1">query</span><span class="s2">.</span><span class="s1">Delete</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">afollestad</span><span class="s2">.</span><span class="s1">materialdialogs</span><span class="s2">.</span><span class="s1">DialogAction</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">afollestad</span><span class="s2">.</span><span class="s1">materialdialogs</span><span class="s2">.</span><span class="s1">MaterialDialog</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">R</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">adapters</span><span class="s2">.</span><span class="s1">GroupListAdapter</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">adapters</span><span class="s2">.</span><span class="s1">SelectionFriendAdapter</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">helpers</span><span class="s2">.</span><span class="s1">Progress</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">intefaces</span><span class="s2">.</span><span class="s1">IFriends</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">intefaces</span><span class="s2">.</span><span class="s1">IGroups</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">intefaces</span><span class="s2">.</span><span class="s1">IStatus</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">models</span><span class="s2">.</span><span class="s1">Friend</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">models</span><span class="s2">.</span><span class="s1">Group</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">models</span><span class="s2">.</span><span class="s1">Member</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">models</span><span class="s2">.</span><span class="s1">ModelList</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">models</span><span class="s2">.</span><span class="s1">Status</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">utils</span><span class="s2">.</span><span class="s1">AppLog</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">utils</span><span class="s2">.</span><span class="s1">InternetConnection</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">utils</span><span class="s2">.</span><span class="s1">OBSession</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">utils</span><span class="s2">.</span><span class="s1">OfficeBotURI</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">viewsholders</span><span class="s2">.</span><span class="s1">ActivityGroupsHolder</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">ArrayList</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">Arrays</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">HashMap</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">util</span><span class="s2">.</span><span class="s1">List</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s0">import </span><span class="s1">retrofit2</span><span class="s2">.</span><span class="s1">Call</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">retrofit2</span><span class="s2">.</span><span class="s1">Callback</span><span class="s2">;</span><span class="s1"> 
</span><span class="s0">import </span><span class="s1">retrofit2</span><span class="s2">.</span><span class="s1">Response</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s0">import static </span><span class="s1">com</span><span class="s2">.</span><span class="s1">example</span><span class="s2">.</span><span class="s1">n_u</span><span class="s2">.</span><span class="s1">officebotapp</span><span class="s2">.</span><span class="s1">R</span><span class="s2">.</span><span class="s1">id</span><span class="s2">.</span><span class="s1">empty_view_text_group_below</span><span class="s2">;</span><span class="s1"> 
 
</span><span class="s0">public class </span><span class="s1">GroupsActivity 
        </span><span class="s0">extends </span><span class="s1">NavigationActivity </span><span class="s2">{</span><span class="s1"> 
    </span><span class="s0">private final </span><span class="s1">HashMap</span><span class="s2">&lt;</span><span class="s1">String</span><span class="s2">, </span><span class="s1">Object</span><span class="s2">&gt; </span><span class="s1">body </span><span class="s2">= </span><span class="s0">new </span><span class="s1">HashMap</span><span class="s2">&lt;&gt;();</span><span class="s1"> 
    </span><span class="s0">private final </span><span class="s1">IFriends friendListRequest </span><span class="s2">= (</span><span class="s1">IFriends</span><span class="s2">) </span><span class="s1">OfficeBotURI</span><span class="s2">.</span><span class="s1">retrofit</span><span class="s2">().</span><span class="s1">create</span><span class="s2">(</span><span class="s1">IFriends</span><span class="s2">.</span><span class="s0">class</span><span class="s2">);</span><span class="s1"> 
    </span><span class="s0">private final </span><span class="s1">IGroups groupListRequest </span><span class="s2">= (</span><span class="s1">IGroups</span><span class="s2">) </span><span class="s1">OfficeBotURI</span><span class="s2">.</span><span class="s1">retrofit</span><span class="s2">().</span><span class="s1">create</span><span class="s2">(</span><span class="s1">IGroups</span><span class="s2">.</span><span class="s0">class</span><span class="s2">);</span><span class="s1"> 
    </span><span class="s0">private final </span><span class="s1">IStatus statusRequest </span><span class="s2">= (</span><span class="s1">IStatus</span><span class="s2">) </span><span class="s1">OfficeBotURI</span><span class="s2">.</span><span class="s1">retrofit</span><span class="s2">().</span><span class="s1">create</span><span class="s2">(</span><span class="s1">IStatus</span><span class="s2">.</span><span class="s0">class</span><span class="s2">);</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">List</span><span class="s2">&lt;</span><span class="s1">Integer</span><span class="s2">&gt; </span><span class="s1">friendId </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">GroupListAdapter listAdapter</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">ModelList</span><span class="s2">&gt; </span><span class="s1">listCall</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">HashMap</span><span class="s2">&lt;</span><span class="s1">Group</span><span class="s2">, </span><span class="s1">List</span><span class="s2">&lt;</span><span class="s1">Member</span><span class="s2">&gt;&gt; </span><span class="s1">listDataChild</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">List</span><span class="s2">&lt;</span><span class="s1">Group</span><span class="s2">&gt; </span><span class="s1">listDataHeader</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">List</span><span class="s2">&lt;</span><span class="s1">Friend</span><span class="s2">&gt; </span><span class="s1">listFriend</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">statusCall</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s0">private </span><span class="s1">ActivityGroupsHolder holder</span><span class="s2">;</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">protected void </span><span class="s1">onCreate</span><span class="s2">(</span><span class="s1">Bundle bundle</span><span class="s2">) {</span><span class="s1"> 
        </span><span class="s0">super</span><span class="s2">.</span><span class="s1">onCreate</span><span class="s2">(</span><span class="s1">bundle</span><span class="s2">);</span><span class="s1"> 
        View v </span><span class="s2">= </span><span class="s1">LayoutInflater</span><span class="s2">.</span><span class="s1">from</span><span class="s2">(</span><span class="s0">this</span><span class="s2">).</span><span class="s1">inflate</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">layout</span><span class="s2">.</span><span class="s1">activity_nav_groups</span><span class="s2">, </span><span class="s0">null</span><span class="s2">);</span><span class="s1"> 
        holder </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ActivityGroupsHolder</span><span class="s2">(</span><span class="s1">v</span><span class="s2">);</span><span class="s1"> 
        setContentView</span><span class="s2">(</span><span class="s1">v</span><span class="s2">);</span><span class="s1"> 
        setUi</span><span class="s2">();</span><span class="s1"> 
        setListener</span><span class="s2">();</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">void </span><span class="s1">setListener</span><span class="s2">() {</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">setOnRefreshListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">OnRefreshListener</span><span class="s2">() {</span><span class="s1"> 
            </span><span class="s0">public void </span><span class="s1">onRefresh</span><span class="s2">() {</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">InternetConnection</span><span class="s2">.</span><span class="s1">checkConnection</span><span class="s2">(</span><span class="s1">getApplicationContext</span><span class="s2">())) {</span><span class="s1"> 
                    data</span><span class="s2">();</span><span class="s1"> 
                    </span><span class="s0">return</span><span class="s2">;</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s3">&quot;Net Not Available&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">setRefreshing</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">setOnLongClickListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">OnLongClickListener</span><span class="s2">() {</span><span class="s1"> 
            </span><span class="s0">public boolean </span><span class="s1">onLongClick</span><span class="s2">(</span><span class="s1">View v</span><span class="s2">) {</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">setRefreshing</span><span class="s2">(</span><span class="s0">true</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">InternetConnection</span><span class="s2">.</span><span class="s1">checkConnection</span><span class="s2">(</span><span class="s1">getApplicationContext</span><span class="s2">())) {</span><span class="s1"> 
                    data</span><span class="s2">();</span><span class="s1"> 
                    </span><span class="s0">return false</span><span class="s2">;</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s3">&quot;Net Not Available&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">setRefreshing</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s0">return false</span><span class="s2">;</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">void </span><span class="s1">setUi</span><span class="s2">() {</span><span class="s1"> 
        nav</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">group_activity</span><span class="s2">));</span><span class="s1"> 
        listDataHeader </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span><span class="s1"> 
        listDataChild </span><span class="s2">= </span><span class="s0">new </span><span class="s1">HashMap</span><span class="s2">&lt;&gt;();</span><span class="s1"> 
        listAdapter </span><span class="s2">= </span><span class="s0">new </span><span class="s1">GroupListAdapter</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s1">listDataHeader</span><span class="s2">, </span><span class="s1">listDataChild</span><span class="s2">, </span><span class="s1">getSupportFragmentManager</span><span class="s2">());</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getLvExpendableGroup</span><span class="s2">().</span><span class="s1">setAnimation</span><span class="s2">(</span><span class="s0">new </span><span class="s1">TranslateAnimation</span><span class="s2">(</span><span class="s0">this</span><span class="s2">, </span><span class="s0">null</span><span class="s2">));</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getLvExpendableGroup</span><span class="s2">().</span><span class="s1">setAnimation</span><span class="s2">(</span><span class="s0">new </span><span class="s1">AlphaAnimation</span><span class="s2">(</span><span class="s4">1.5F</span><span class="s2">, </span><span class="s4">2.5F</span><span class="s2">));</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getLvExpendableGroup</span><span class="s2">().</span><span class="s1">setAdapter</span><span class="s2">(</span><span class="s1">listAdapter</span><span class="s2">);</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getLvExpendableGroup</span><span class="s2">().</span><span class="s1">setSoundEffectsEnabled</span><span class="s2">(</span><span class="s0">true</span><span class="s2">);</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getLvExpendableGroup</span><span class="s2">().</span><span class="s1">setOnGroupExpandListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">ExpandableListView</span><span class="s2">.</span><span class="s1">OnGroupExpandListener</span><span class="s2">() {</span><span class="s1"> 
            @Override 
            </span><span class="s0">public void </span><span class="s1">onGroupExpand</span><span class="s2">(</span><span class="s0">int </span><span class="s1">groupPosition</span><span class="s2">) {</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">setVibrate</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">INTENSITY_LOW</span><span class="s2">);</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
        registerForContextMenu</span><span class="s2">(</span><span class="s1">holder</span><span class="s2">.</span><span class="s1">getLvExpendableGroup</span><span class="s2">());</span><span class="s1"> 
        holder</span><span class="s2">.</span><span class="s1">getLvExpendableGroup</span><span class="s2">().</span><span class="s1">setEmptyView</span><span class="s2">(</span><span class="s1">findViewById</span><span class="s2">(</span><span class="s1">empty_view_text_group_below</span><span class="s2">));</span><span class="s1"> 
 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">protected void </span><span class="s1">onResume</span><span class="s2">() {</span><span class="s1"> 
        </span><span class="s0">super</span><span class="s2">.</span><span class="s1">onResume</span><span class="s2">();</span><span class="s1"> 
        </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
            listAdapter</span><span class="s2">.</span><span class="s1">addAll</span><span class="s2">();</span><span class="s1"> 
        </span><span class="s2">} </span><span class="s0">catch </span><span class="s2">(</span><span class="s1">Exception localException</span><span class="s2">) {</span><span class="s1"> 
            AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">localException</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">());</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">private void </span><span class="s1">data</span><span class="s2">() {</span><span class="s1"> 
        body</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">user_id_key</span><span class="s2">), </span><span class="s1">OBSession</span><span class="s2">.</span><span class="s1">getPreference</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">id_key</span><span class="s2">), </span><span class="s0">this</span><span class="s2">));</span><span class="s1"> 
        listCall </span><span class="s2">= </span><span class="s1">groupListRequest</span><span class="s2">.</span><span class="s1">getGroupList</span><span class="s2">(</span><span class="s1">body</span><span class="s2">);</span><span class="s1"> 
        listCall</span><span class="s2">.</span><span class="s1">enqueue</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Callback</span><span class="s2">&lt;</span><span class="s1">ModelList</span><span class="s2">&gt;() {</span><span class="s1"> 
            @Override 
            </span><span class="s0">public void </span><span class="s1">onFailure</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">ModelList</span><span class="s2">&gt; </span><span class="s1">callback 
                    </span><span class="s2">, </span><span class="s1">Throwable t</span><span class="s2">) {</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s3">&quot;Net Not Available </span><span class="s4">\n</span><span class="s3">&quot; </span><span class="s2">+ </span><span class="s1">t</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">(), </span><span class="s1">getApplication</span><span class="s2">());</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">());</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">getLocalizedMessage</span><span class="s2">());</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">getCause</span><span class="s2">().</span><span class="s1">getLocalizedMessage</span><span class="s2">());</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">setRefreshing</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
 
            @Override 
            </span><span class="s0">public void </span><span class="s1">onResponse</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">ModelList</span><span class="s2">&gt; </span><span class="s1">callback 
                    </span><span class="s2">, </span><span class="s1">Response</span><span class="s2">&lt;</span><span class="s1">ModelList</span><span class="s2">&gt; </span><span class="s1">response</span><span class="s2">) {</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">() == </span><span class="s4">200</span><span class="s2">) {</span><span class="s1"> 
                    </span><span class="s0">if </span><span class="s2">(!</span><span class="s1">listDataHeader</span><span class="s2">.</span><span class="s1">containsAll</span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">().</span><span class="s1">getGroupList</span><span class="s2">())) {</span><span class="s1"> 
                        </span><span class="s0">new </span><span class="s1">Delete</span><span class="s2">().</span><span class="s1">from</span><span class="s2">(</span><span class="s1">Member</span><span class="s2">.</span><span class="s0">class</span><span class="s2">).</span><span class="s1">execute</span><span class="s2">();</span><span class="s1"> 
                        </span><span class="s0">new </span><span class="s1">Delete</span><span class="s2">().</span><span class="s1">from</span><span class="s2">(</span><span class="s1">Group</span><span class="s2">.</span><span class="s0">class</span><span class="s2">).</span><span class="s1">execute</span><span class="s2">();</span><span class="s1"> 
                        ActiveAndroid</span><span class="s2">.</span><span class="s1">beginTransaction</span><span class="s2">();</span><span class="s1"> 
                        </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
                            </span><span class="s0">for </span><span class="s2">(</span><span class="s1">Group temp </span><span class="s2">: </span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">().</span><span class="s1">getGroupList</span><span class="s2">()) {</span><span class="s1"> 
                                Group item </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Group</span><span class="s2">(</span><span class="s1">temp</span><span class="s2">);</span><span class="s1"> 
                                </span><span class="s0">for </span><span class="s2">(</span><span class="s1">Member mem </span><span class="s2">: </span><span class="s1">temp</span><span class="s2">.</span><span class="s1">getMember</span><span class="s2">()) {</span><span class="s1"> 
                                    Member m </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Member</span><span class="s2">(</span><span class="s1">mem</span><span class="s2">);</span><span class="s1"> 
                                    m</span><span class="s2">.</span><span class="s1">save</span><span class="s2">();</span><span class="s1"> 
                                </span><span class="s2">}</span><span class="s1"> 
                                AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">item</span><span class="s2">.</span><span class="s1">getMember</span><span class="s2">().</span><span class="s1">toString</span><span class="s2">());</span><span class="s1"> 
                                item</span><span class="s2">.</span><span class="s1">save</span><span class="s2">();</span><span class="s1"> 
                            </span><span class="s2">}</span><span class="s1"> 
                            ActiveAndroid</span><span class="s2">.</span><span class="s1">setTransactionSuccessful</span><span class="s2">();</span><span class="s1"> 
                        </span><span class="s2">} </span><span class="s0">finally </span><span class="s2">{</span><span class="s1"> 
                            ActiveAndroid</span><span class="s2">.</span><span class="s1">endTransaction</span><span class="s2">();</span><span class="s1"> 
                        </span><span class="s2">}</span><span class="s1"> 
                        listAdapter</span><span class="s2">.</span><span class="s1">clear</span><span class="s2">();</span><span class="s1"> 
                        listAdapter</span><span class="s2">.</span><span class="s1">addAll</span><span class="s2">();</span><span class="s1"> 
</span><span class="s5">//                        listDataHeader.clear();</span><span class="s1"> 
</span><span class="s5">//                        listDataHeader.addAll(response.body().getGroupList());</span><span class="s1"> 
</span><span class="s5">//                        int j = listDataHeader.size();</span><span class="s1"> 
</span><span class="s5">//                        int i = 0;</span><span class="s1"> 
</span><span class="s5">//                        while (i &lt; j) {</span><span class="s1"> 
</span><span class="s5">//                            listDataChild.put(listDataHeader.get(i),</span><span class="s1"> 
</span><span class="s5">//                                    listDataHeader.get(i).getMember());</span><span class="s1"> 
</span><span class="s5">//                            i += 1;</span><span class="s1"> 
</span><span class="s5">//                        }</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
                    listAdapter</span><span class="s2">.</span><span class="s1">notifyDataSetChanged</span><span class="s2">();</span><span class="s1"> 
                    holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">setRefreshing</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">else</span><span class="s1"> 
                    Snackbar</span><span class="s2">.</span><span class="s1">make</span><span class="s2">(</span><span class="s1">holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">(), </span><span class="s3">&quot;Server Offline&quot;</span><span class="s2">,</span><span class="s1"> 
                            Snackbar</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">setRefreshing</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">public boolean </span><span class="s1">onContextItemSelected</span><span class="s2">(</span><span class="s1">MenuItem menuItem</span><span class="s2">) {</span><span class="s1"> 
        </span><span class="s0">final </span><span class="s1">ExpandableListView</span><span class="s2">.</span><span class="s1">ExpandableListContextMenuInfo info </span><span class="s2">=</span><span class="s1"> 
                </span><span class="s2">(</span><span class="s1">ExpandableListView</span><span class="s2">.</span><span class="s1">ExpandableListContextMenuInfo</span><span class="s2">)</span><span class="s1"> 
                        menuItem</span><span class="s2">.</span><span class="s1">getMenuInfo</span><span class="s2">();</span><span class="s1"> 
        </span><span class="s0">switch </span><span class="s2">(</span><span class="s1">menuItem</span><span class="s2">.</span><span class="s1">getItemId</span><span class="s2">()) {</span><span class="s1"> 
            </span><span class="s0">case </span><span class="s4">1</span><span class="s2">:</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s3">&quot;Edit Selected&quot;</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                </span><span class="s0">break</span><span class="s2">;</span><span class="s1"> 
            </span><span class="s0">case </span><span class="s4">2</span><span class="s2">:</span><span class="s1"> 
                body</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">group_id_key</span><span class="s2">), </span><span class="s1">listDataHeader</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">ExpandableListView</span><span class="s2">.</span><span class="s1"> 
                        getPackedPositionGroup</span><span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">packedPosition</span><span class="s2">))</span><span class="s1"> 
                        </span><span class="s2">.</span><span class="s1">getGroupId</span><span class="s2">());</span><span class="s1"> 
                statusCall </span><span class="s2">= </span><span class="s1">statusRequest</span><span class="s2">.</span><span class="s1">getGroupDeleteStatus</span><span class="s2">(</span><span class="s1">body</span><span class="s2">);</span><span class="s1"> 
                AlertDialog</span><span class="s2">.</span><span class="s1">Builder alertDialogBuilder </span><span class="s2">= </span><span class="s0">new </span><span class="s1">AlertDialog</span><span class="s2">.</span><span class="s1">Builder</span><span class="s2">(</span><span class="s1">context</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s0">final </span><span class="s1">AlertDialog alertDialog</span><span class="s2">;</span><span class="s1"> 
                alertDialogBuilder</span><span class="s2">.</span><span class="s1">setMessage</span><span class="s2">(</span><span class="s3">&quot;Are you sure, &quot; </span><span class="s2">+</span><span class="s1"> 
                        </span><span class="s3">&quot;You wanted to delete this?&quot;</span><span class="s2">);</span><span class="s1"> 
                alertDialogBuilder</span><span class="s2">.</span><span class="s1">setPositiveButton</span><span class="s2">(</span><span class="s3">&quot;Yes&quot;</span><span class="s2">,</span><span class="s1"> 
                        </span><span class="s0">new </span><span class="s1">DialogInterface</span><span class="s2">.</span><span class="s1">OnClickListener</span><span class="s2">() {</span><span class="s1"> 
                            @Override 
                            </span><span class="s0">public void </span><span class="s1">onClick</span><span class="s2">(</span><span class="s0">final </span><span class="s1">DialogInterface dialog</span><span class="s2">, </span><span class="s0">int </span><span class="s1">which</span><span class="s2">) {</span><span class="s1"> 
                                Progress</span><span class="s2">.</span><span class="s1">Show</span><span class="s2">(</span><span class="s1">context</span><span class="s2">);</span><span class="s1"> 
                                statusCall</span><span class="s2">.</span><span class="s1">enqueue</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Callback</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt;() {</span><span class="s1"> 
                                    @Override 
                                    </span><span class="s0">public void </span><span class="s1">onResponse</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">call</span><span class="s2">, </span><span class="s1">Response</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">response</span><span class="s2">) {</span><span class="s1"> 
                                        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">() == </span><span class="s4">200</span><span class="s2">) {</span><span class="s1"> 
                                            Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s3">&quot;Delete Selected Group&quot;</span><span class="s2">, </span><span class="s1">Toast</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                                            listAdapter</span><span class="s2">.</span><span class="s1">delete</span><span class="s2">(</span><span class="s1">listDataHeader</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">ExpandableListView</span><span class="s2">.</span><span class="s1"> 
                                                    getPackedPositionGroup</span><span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">packedPosition</span><span class="s2">)));</span><span class="s1"> 
                                        </span><span class="s2">} </span><span class="s0">else</span><span class="s1"> 
                                            Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s1">response</span><span class="s2">.</span><span class="s1">message</span><span class="s2">(), </span><span class="s1">Toast</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                                        Progress</span><span class="s2">.</span><span class="s1">Cancel</span><span class="s2">();</span><span class="s1"> 
                                        dialog</span><span class="s2">.</span><span class="s1">cancel</span><span class="s2">();</span><span class="s1"> 
                                        holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">performLongClick</span><span class="s2">();</span><span class="s1"> 
                                    </span><span class="s2">}</span><span class="s1"> 
 
                                    @Override 
                                    </span><span class="s0">public void </span><span class="s1">onFailure</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">call</span><span class="s2">, </span><span class="s1">Throwable t</span><span class="s2">) {</span><span class="s1"> 
                                        Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s1">t</span><span class="s2">.</span><span class="s1">getLocalizedMessage</span><span class="s2">(), </span><span class="s1">Toast</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                                        Progress</span><span class="s2">.</span><span class="s1">Cancel</span><span class="s2">();</span><span class="s1"> 
                                    </span><span class="s2">}</span><span class="s1"> 
                                </span><span class="s2">});</span><span class="s1"> 
                                AppLog</span><span class="s2">.</span><span class="s1">setVibrate</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">INTENSITY_MIDDLE</span><span class="s2">);</span><span class="s1"> 
                            </span><span class="s2">}</span><span class="s1"> 
                        </span><span class="s2">});</span><span class="s1"> 
                alertDialogBuilder</span><span class="s2">.</span><span class="s1">setNegativeButton</span><span class="s2">(</span><span class="s3">&quot;No&quot;</span><span class="s2">, </span><span class="s0">new </span><span class="s1">DialogInterface</span><span class="s2">.</span><span class="s1">OnClickListener</span><span class="s2">() {</span><span class="s1"> 
                    @Override 
                    </span><span class="s0">public void </span><span class="s1">onClick</span><span class="s2">(</span><span class="s1">DialogInterface dialog</span><span class="s2">, </span><span class="s0">int </span><span class="s1">which</span><span class="s2">) {</span><span class="s1"> 
                        dialog</span><span class="s2">.</span><span class="s1">cancel</span><span class="s2">();</span><span class="s1"> 
                        AppLog</span><span class="s2">.</span><span class="s1">setVibrate</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">INTENSITY_HIGH</span><span class="s2">);</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
                </span><span class="s2">});</span><span class="s1"> 
                alertDialog </span><span class="s2">= </span><span class="s1">alertDialogBuilder</span><span class="s2">.</span><span class="s1">create</span><span class="s2">();</span><span class="s1"> 
                alertDialog</span><span class="s2">.</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
 
                </span><span class="s0">break</span><span class="s2">;</span><span class="s1"> 
            </span><span class="s0">case </span><span class="s4">3</span><span class="s2">:</span><span class="s1"> 
                body</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">user_id_key</span><span class="s2">)</span><span class="s1"> 
                        </span><span class="s2">, </span><span class="s1">OBSession</span><span class="s2">.</span><span class="s1">getPreference</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">id_key</span><span class="s2">), </span><span class="s1">context</span><span class="s2">));</span><span class="s1"> 
                body</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">group_id_key</span><span class="s2">), </span><span class="s1">String</span><span class="s2">.</span><span class="s1">valueOf</span><span class="s2">(</span><span class="s1">listDataHeader</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">ExpandableListView</span><span class="s2">.</span><span class="s1"> 
                        getPackedPositionGroup</span><span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">packedPosition</span><span class="s2">)).</span><span class="s1">getGroupId</span><span class="s2">()));</span><span class="s1"> 
                listCall </span><span class="s2">= </span><span class="s1">friendListRequest</span><span class="s2">.</span><span class="s1">getGroupMemberList</span><span class="s2">(</span><span class="s1">body</span><span class="s2">);</span><span class="s1"> 
                listFriend </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span><span class="s1"> 
                listFriend</span><span class="s2">.</span><span class="s1">addAll</span><span class="s2">(</span><span class="s1">Friend</span><span class="s2">.</span><span class="s1">getAll</span><span class="s2">());</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">listFriend</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">() + </span><span class="s3">&quot; &quot; </span><span class="s2">+ </span><span class="s1">listFriend</span><span class="s2">.</span><span class="s1">size</span><span class="s2">());</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">listFriend</span><span class="s2">.</span><span class="s1">size</span><span class="s2">() &lt; </span><span class="s4">1</span><span class="s2">) {</span><span class="s1"> 
                    Progress</span><span class="s2">.</span><span class="s1">Show</span><span class="s2">(</span><span class="s1">context</span><span class="s2">);</span><span class="s1"> 
                    listCall</span><span class="s2">.</span><span class="s1">enqueue</span><span class="s2">(</span><span class="s0">new </span><span class="s1">retrofit2</span><span class="s2">.</span><span class="s1">Callback</span><span class="s2">&lt;</span><span class="s1">ModelList</span><span class="s2">&gt;() {</span><span class="s1"> 
                        @Override 
                        </span><span class="s0">public void </span><span class="s1">onResponse</span><span class="s2">(</span><span class="s1">retrofit2</span><span class="s2">.</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">ModelList</span><span class="s2">&gt; </span><span class="s1">call</span><span class="s2">,</span><span class="s1"> 
                                               retrofit2</span><span class="s2">.</span><span class="s1">Response</span><span class="s2">&lt;</span><span class="s1">ModelList</span><span class="s2">&gt; </span><span class="s1">response</span><span class="s2">) {</span><span class="s1"> 
                            listFriend </span><span class="s2">= </span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">().</span><span class="s1">getFriendList</span><span class="s2">();</span><span class="s1"> 
                            </span><span class="s0">if </span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">() == </span><span class="s4">200 </span><span class="s2">&amp;&amp; </span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">() != </span><span class="s0">null</span><span class="s2">) {</span><span class="s1"> 
                                </span><span class="s0">new </span><span class="s1">Delete</span><span class="s2">().</span><span class="s1">from</span><span class="s2">(</span><span class="s1">Friend</span><span class="s2">.</span><span class="s0">class</span><span class="s2">).</span><span class="s1">execute</span><span class="s2">();</span><span class="s1"> 
                                ActiveAndroid</span><span class="s2">.</span><span class="s1">beginTransaction</span><span class="s2">();</span><span class="s1"> 
                                </span><span class="s0">try </span><span class="s2">{</span><span class="s1"> 
                                    </span><span class="s0">for </span><span class="s2">(</span><span class="s1">Friend temp </span><span class="s2">: </span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">().</span><span class="s1">getFriendList</span><span class="s2">()) {</span><span class="s1"> 
                                        Friend item </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Friend</span><span class="s2">(</span><span class="s1">temp</span><span class="s2">);</span><span class="s1"> 
                                        item</span><span class="s2">.</span><span class="s1">save</span><span class="s2">();</span><span class="s1"> 
                                    </span><span class="s2">}</span><span class="s1"> 
                                    ActiveAndroid</span><span class="s2">.</span><span class="s1">setTransactionSuccessful</span><span class="s2">();</span><span class="s1"> 
                                </span><span class="s2">} </span><span class="s0">finally </span><span class="s2">{</span><span class="s1"> 
                                    ActiveAndroid</span><span class="s2">.</span><span class="s1">endTransaction</span><span class="s2">();</span><span class="s1"> 
 
                                </span><span class="s2">}</span><span class="s1"> 
                                listFriend</span><span class="s2">.</span><span class="s1">addAll</span><span class="s2">(</span><span class="s1">Friend</span><span class="s2">.</span><span class="s1">getAll</span><span class="s2">());</span><span class="s1"> 
                                setFriendList</span><span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">packedPosition</span><span class="s2">);</span><span class="s1"> 
                            </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                                AppLog</span><span class="s2">.</span><span class="s1">toastString</span><span class="s2">(</span><span class="s3">&quot;Server not Available&quot;</span><span class="s2">, </span><span class="s1">context</span><span class="s2">);</span><span class="s1"> 
                            </span><span class="s2">}</span><span class="s1"> 
                            Progress</span><span class="s2">.</span><span class="s1">Cancel</span><span class="s2">();</span><span class="s1"> 
                        </span><span class="s2">}</span><span class="s1"> 
 
                        @Override 
                        </span><span class="s0">public void </span><span class="s1">onFailure</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">ModelList</span><span class="s2">&gt; </span><span class="s1">call</span><span class="s2">, </span><span class="s1">Throwable t</span><span class="s2">) {</span><span class="s1"> 
                            Log</span><span class="s2">.</span><span class="s1">e</span><span class="s2">(</span><span class="s3">&quot;TAG&quot;</span><span class="s2">, </span><span class="s3">&quot;onResponse: END&quot; </span><span class="s2">+ </span><span class="s1">t</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">() +</span><span class="s1"> 
                                    </span><span class="s3">&quot;</span><span class="s4">\n</span><span class="s3"> &quot; </span><span class="s2">+ </span><span class="s1">t</span><span class="s2">.</span><span class="s1">getLocalizedMessage</span><span class="s2">() +</span><span class="s1"> 
                                    </span><span class="s3">&quot;</span><span class="s4">\n</span><span class="s3"> &quot; </span><span class="s2">+ </span><span class="s1">t</span><span class="s2">.</span><span class="s1">getCause</span><span class="s2">() +</span><span class="s1"> 
                                    </span><span class="s3">&quot;</span><span class="s4">\n</span><span class="s3"> &quot; </span><span class="s2">+ </span><span class="s1">Arrays</span><span class="s2">.</span><span class="s1">toString</span><span class="s2">(</span><span class="s1">t</span><span class="s2">.</span><span class="s1">getStackTrace</span><span class="s2">()));</span><span class="s1"> 
                            Progress</span><span class="s2">.</span><span class="s1">Cancel</span><span class="s2">();</span><span class="s1"> 
                            Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s1">t</span><span class="s2">.</span><span class="s1">getLocalizedMessage</span><span class="s2">(), </span><span class="s1">Toast</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                        </span><span class="s2">}</span><span class="s1"> 
                    </span><span class="s2">});</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                    setFriendList</span><span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">packedPosition</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
 
                </span><span class="s0">break</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s0">return super</span><span class="s2">.</span><span class="s1">onContextItemSelected</span><span class="s2">(</span><span class="s1">menuItem</span><span class="s2">);</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">public void </span><span class="s1">onCreateContextMenu</span><span class="s2">(</span><span class="s1">ContextMenu contextMenu</span><span class="s2">,</span><span class="s1"> 
                                    View view</span><span class="s2">,</span><span class="s1"> 
                                    ContextMenuInfo menuInfo</span><span class="s2">) {</span><span class="s1"> 
        </span><span class="s0">super</span><span class="s2">.</span><span class="s1">onCreateContextMenu</span><span class="s2">(</span><span class="s1">contextMenu</span><span class="s2">, </span><span class="s1">view</span><span class="s2">, </span><span class="s1">menuInfo</span><span class="s2">);</span><span class="s1"> 
        ExpandableListView</span><span class="s2">.</span><span class="s1">ExpandableListContextMenuInfo info </span><span class="s2">=</span><span class="s1"> 
                </span><span class="s2">(</span><span class="s1">ExpandableListView</span><span class="s2">.</span><span class="s1">ExpandableListContextMenuInfo</span><span class="s2">) </span><span class="s1">menuInfo</span><span class="s2">;</span><span class="s1"> 
        contextMenu</span><span class="s2">.</span><span class="s1">setHeaderTitle</span><span class="s2">(</span><span class="s3">&quot;Options for &quot; </span><span class="s2">+ </span><span class="s1">listAdapter</span><span class="s2">.</span><span class="s1">getGroup</span><span class="s2">(</span><span class="s1">ExpandableListView</span><span class="s2">.</span><span class="s1"> 
                getPackedPositionGroup</span><span class="s2">(</span><span class="s1">info</span><span class="s2">.</span><span class="s1">packedPosition</span><span class="s2">)));</span><span class="s1"> 
        contextMenu</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s2">, </span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">edit_text_dialoge</span><span class="s2">));</span><span class="s1"> 
        contextMenu</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">delete</span><span class="s2">);</span><span class="s1"> 
        contextMenu</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s4">1</span><span class="s2">, </span><span class="s4">3</span><span class="s2">, </span><span class="s4">3</span><span class="s2">, </span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">add_friend</span><span class="s2">);</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">public boolean </span><span class="s1">onCreateOptionsMenu</span><span class="s2">(</span><span class="s1">Menu menu</span><span class="s2">) {</span><span class="s1"> 
        getMenuInflater</span><span class="s2">().</span><span class="s1">inflate</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">menu</span><span class="s2">.</span><span class="s1">tag</span><span class="s2">, </span><span class="s1">menu</span><span class="s2">);</span><span class="s1"> 
        </span><span class="s0">return true</span><span class="s2">;</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">public boolean </span><span class="s1">onNavigationItemSelected</span><span class="s2">(</span><span class="s1">@NonNull MenuItem item</span><span class="s2">) {</span><span class="s1"> 
        </span><span class="s0">return super</span><span class="s2">.</span><span class="s1">onNavigationItemSelected</span><span class="s2">(</span><span class="s1">item</span><span class="s2">);</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">public boolean </span><span class="s1">onOptionsItemSelected</span><span class="s2">(</span><span class="s0">final </span><span class="s1">MenuItem menuItem</span><span class="s2">) {</span><span class="s1"> 
        </span><span class="s0">if </span><span class="s2">(</span><span class="s1">menuItem</span><span class="s2">.</span><span class="s1">getItemId</span><span class="s2">() == </span><span class="s1">R</span><span class="s2">.</span><span class="s1">id</span><span class="s2">.</span><span class="s1">action_add_new_group</span><span class="s2">) {</span><span class="s1"> 
            </span><span class="s0">final </span><span class="s1">MaterialDialog</span><span class="s2">.</span><span class="s1">Builder mb </span><span class="s2">= </span><span class="s0">new </span><span class="s1">MaterialDialog</span><span class="s2">.</span><span class="s1">Builder</span><span class="s2">(</span><span class="s0">this</span><span class="s2">);</span><span class="s1"> 
            mb</span><span class="s2">.</span><span class="s1">customView</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">layout</span><span class="s2">.</span><span class="s1">dialogue_box</span><span class="s2">, </span><span class="s0">true</span><span class="s2">);</span><span class="s1"> 
            mb</span><span class="s2">.</span><span class="s1">title</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">add_new_group</span><span class="s2">));</span><span class="s1"> 
            mb</span><span class="s2">.</span><span class="s1">positiveText</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">create</span><span class="s2">);</span><span class="s1"> 
            mb</span><span class="s2">.</span><span class="s1">onPositive</span><span class="s2">(</span><span class="s0">new </span><span class="s1">MaterialDialog</span><span class="s2">.</span><span class="s1">SingleButtonCallback</span><span class="s2">() {</span><span class="s1"> 
                @Override 
                </span><span class="s0">public void </span><span class="s1">onClick</span><span class="s2">(</span><span class="s1">@NonNull </span><span class="s0">final </span><span class="s1">MaterialDialog dialog</span><span class="s2">, </span><span class="s1">@NonNull DialogAction which</span><span class="s2">) {</span><span class="s1"> 
                    </span><span class="s0">if </span><span class="s2">(!((</span><span class="s1">EditText</span><span class="s2">) </span><span class="s1">dialog</span><span class="s2">.</span><span class="s1">findViewById</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">id</span><span class="s2">.</span><span class="s1">name</span><span class="s2">)).</span><span class="s1">getText</span><span class="s2">().</span><span class="s1">toString</span><span class="s2">().</span><span class="s1">isEmpty</span><span class="s2">()) {</span><span class="s1"> 
                        body</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">name_key</span><span class="s2">), ((</span><span class="s1">EditText</span><span class="s2">) </span><span class="s1">dialog</span><span class="s2">.</span><span class="s1">findViewById</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">id</span><span class="s2">.</span><span class="s1">name</span><span class="s2">)).</span><span class="s1">getText</span><span class="s2">().</span><span class="s1">toString</span><span class="s2">());</span><span class="s1"> 
                        body</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">user_id_key</span><span class="s2">), </span><span class="s1">OBSession</span><span class="s2">.</span><span class="s1">getPreference</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">id_key</span><span class="s2">), </span><span class="s1">context</span><span class="s2">));</span><span class="s1"> 
                        statusCall </span><span class="s2">= </span><span class="s1">statusRequest</span><span class="s2">.</span><span class="s1">getGroupAddStatus</span><span class="s2">(</span><span class="s1">body</span><span class="s2">);</span><span class="s1"> 
                        Progress</span><span class="s2">.</span><span class="s1">Show</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">new_group</span><span class="s2">));</span><span class="s1"> 
                        statusCall</span><span class="s2">.</span><span class="s1">enqueue</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Callback</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt;() {</span><span class="s1"> 
                            </span><span class="s0">public void </span><span class="s1">onFailure</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">callback</span><span class="s2">,</span><span class="s1"> 
                                                  Throwable throwable</span><span class="s2">) {</span><span class="s1"> 
                                Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s1">GroupsActivity</span><span class="s2">.</span><span class="s0">this</span><span class="s2">, </span><span class="s1">throwable</span><span class="s2">.</span><span class="s1">getMessage</span><span class="s2">(),</span><span class="s1"> 
                                        Toast</span><span class="s2">.</span><span class="s1">LENGTH_LONG</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                                dialog</span><span class="s2">.</span><span class="s1">dismiss</span><span class="s2">();</span><span class="s1"> 
                            </span><span class="s2">}</span><span class="s1"> 
 
                            </span><span class="s0">public void </span><span class="s1">onResponse</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">callback</span><span class="s2">,</span><span class="s1"> 
                                                   Response</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">response</span><span class="s2">) {</span><span class="s1"> 
                                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">() == </span><span class="s4">200</span><span class="s2">) {</span><span class="s1"> 
                                    </span><span class="s0">if </span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">().</span><span class="s1">isGroup</span><span class="s2">()) {</span><span class="s1"> 
                                        Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s1">GroupsActivity</span><span class="s2">.</span><span class="s0">this</span><span class="s2">, </span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">success</span><span class="s2">,</span><span class="s1"> 
                                                Toast</span><span class="s2">.</span><span class="s1">LENGTH_LONG</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                                        dialog</span><span class="s2">.</span><span class="s1">dismiss</span><span class="s2">();</span><span class="s1"> 
                                        Progress</span><span class="s2">.</span><span class="s1">Cancel</span><span class="s2">();</span><span class="s1"> 
                                        holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">performClick</span><span class="s2">();</span><span class="s1"> 
                                    </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                                        Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s1">GroupsActivity</span><span class="s2">.</span><span class="s0">this</span><span class="s2">, </span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">not_success</span><span class="s2">,</span><span class="s1"> 
                                                Toast</span><span class="s2">.</span><span class="s1">LENGTH_LONG</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                                        dialog</span><span class="s2">.</span><span class="s1">dismiss</span><span class="s2">();</span><span class="s1"> 
                                        Progress</span><span class="s2">.</span><span class="s1">Cancel</span><span class="s2">();</span><span class="s1"> 
                                    </span><span class="s2">}</span><span class="s1"> 
                                    holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">performClick</span><span class="s2">();</span><span class="s1"> 
                                </span><span class="s2">} </span><span class="s0">else</span><span class="s1"> 
                                    Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s1">GroupsActivity</span><span class="s2">.</span><span class="s0">this</span><span class="s2">,</span><span class="s1"> 
                                            </span><span class="s3">&quot;Server Offline&quot; </span><span class="s2">+ </span><span class="s1">response</span><span class="s2">.</span><span class="s1">code</span><span class="s2">(),</span><span class="s1"> 
                                            Toast</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                                Progress</span><span class="s2">.</span><span class="s1">Cancel</span><span class="s2">();</span><span class="s1"> 
                                holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">performLongClick</span><span class="s2">();</span><span class="s1"> 
 
                            </span><span class="s2">}</span><span class="s1"> 
                        </span><span class="s2">});</span><span class="s1"> 
                    </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                        </span><span class="s2">((</span><span class="s1">EditText</span><span class="s2">) </span><span class="s1">dialog</span><span class="s2">.</span><span class="s1">findViewById</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">id</span><span class="s2">.</span><span class="s1">name</span><span class="s2">)).</span><span class="s1">setError</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">field_empty</span><span class="s2">));</span><span class="s1"> 
                        mb</span><span class="s2">.</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                    </span><span class="s2">}</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
            </span><span class="s2">});</span><span class="s1"> 
            mb</span><span class="s2">.</span><span class="s1">negativeText</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">cancel_btn</span><span class="s2">);</span><span class="s1"> 
            mb</span><span class="s2">.</span><span class="s1">onNegative</span><span class="s2">(</span><span class="s0">new </span><span class="s1">MaterialDialog</span><span class="s2">.</span><span class="s1">SingleButtonCallback</span><span class="s2">() {</span><span class="s1"> 
                @Override 
                </span><span class="s0">public void </span><span class="s1">onClick</span><span class="s2">(</span><span class="s1">@NonNull MaterialDialog dialog</span><span class="s2">, </span><span class="s1">@NonNull DialogAction which</span><span class="s2">) {</span><span class="s1"> 
                    Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">cancel</span><span class="s2">, </span><span class="s1">Toast</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                    dialog</span><span class="s2">.</span><span class="s1">dismiss</span><span class="s2">();</span><span class="s1"> 
 
                </span><span class="s2">}</span><span class="s1"> 
            </span><span class="s2">});</span><span class="s1"> 
            </span><span class="s0">final </span><span class="s1">MaterialDialog md </span><span class="s2">= </span><span class="s1">mb</span><span class="s2">.</span><span class="s1">build</span><span class="s2">();</span><span class="s1"> 
            mb</span><span class="s2">.</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
            </span><span class="s0">return true</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s0">return super</span><span class="s2">.</span><span class="s1">onOptionsItemSelected</span><span class="s2">(</span><span class="s1">menuItem</span><span class="s2">);</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 <hr class="ls0">    </span><span class="s0">public void </span><span class="s1">setFriendList</span><span class="s2">(</span><span class="s0">final long </span><span class="s1">pos</span><span class="s2">) {</span><span class="s1"> 
        </span><span class="s0">final </span><span class="s1">RecyclerView rv</span><span class="s2">;</span><span class="s1"> 
        </span><span class="s0">final </span><span class="s1">MaterialDialog</span><span class="s2">.</span><span class="s1">Builder mb </span><span class="s2">= </span><span class="s0">new </span><span class="s1">MaterialDialog</span><span class="s2">.</span><span class="s1">Builder</span><span class="s2">(</span><span class="s1">context</span><span class="s2">);</span><span class="s1"> 
        mb</span><span class="s2">.</span><span class="s1">customView</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">layout</span><span class="s2">.</span><span class="s1">dialouge_list_view</span><span class="s2">, </span><span class="s0">false</span><span class="s2">);</span><span class="s1"> 
        mb</span><span class="s2">.</span><span class="s1">title</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">add_friend</span><span class="s2">));</span><span class="s1"> 
        </span><span class="s0">final </span><span class="s1">MaterialDialog md </span><span class="s2">= </span><span class="s1">mb</span><span class="s2">.</span><span class="s1">build</span><span class="s2">();</span><span class="s1"> 
        </span><span class="s0">final </span><span class="s1">SelectionFriendAdapter adapterFriend</span><span class="s2">;</span><span class="s1"> 
        List</span><span class="s2">&lt;</span><span class="s1">Member</span><span class="s2">&gt; </span><span class="s1">trap </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span><span class="s1"> 
        trap</span><span class="s2">.</span><span class="s1">addAll</span><span class="s2">(</span><span class="s1">listAdapter</span><span class="s2">.</span><span class="s1">getChildDetail</span><span class="s2">(</span><span class="s1">ExpandableListView</span><span class="s2">.</span><span class="s1"> 
                getPackedPositionGroup</span><span class="s2">(</span><span class="s1">pos</span><span class="s2">)));</span><span class="s1"> 
        List</span><span class="s2">&lt;</span><span class="s1">Friend</span><span class="s2">&gt; </span><span class="s1">temporary </span><span class="s2">= </span><span class="s0">new </span><span class="s1">ArrayList</span><span class="s2">&lt;&gt;();</span><span class="s1"> 
        temporary</span><span class="s2">.</span><span class="s1">addAll</span><span class="s2">(</span><span class="s1">listFriend</span><span class="s2">);</span><span class="s1"> 
        </span><span class="s0">for </span><span class="s2">(</span><span class="s1">Friend frd </span><span class="s2">: </span><span class="s1">temporary</span><span class="s2">) {</span><span class="s1"> 
            </span><span class="s0">for </span><span class="s2">(</span><span class="s1">Member temp </span><span class="s2">: </span><span class="s1">trap</span><span class="s2">) {</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">temp</span><span class="s2">.</span><span class="s1">getUserId</span><span class="s2">() == </span><span class="s1">frd</span><span class="s2">.</span><span class="s1">getFriendId</span><span class="s2">() &amp;&amp; </span><span class="s1">temp</span><span class="s2">.</span><span class="s1">getName</span><span class="s2">().</span><span class="s1">equalsIgnoreCase</span><span class="s2">(</span><span class="s1">frd</span><span class="s2">.</span><span class="s1">getName</span><span class="s2">())) {</span><span class="s1"> 
                    listFriend</span><span class="s2">.</span><span class="s1">remove</span><span class="s2">(</span><span class="s1">frd</span><span class="s2">);</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">else </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">logString</span><span class="s2">(</span><span class="s1">temp</span><span class="s2">.</span><span class="s1">getName</span><span class="s2">());</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">}</span><span class="s1"> 
        adapterFriend </span><span class="s2">= </span><span class="s0">new </span><span class="s1">SelectionFriendAdapter</span><span class="s2">(</span><span class="s1">getApplicationContext</span><span class="s2">(), </span><span class="s1">listFriend</span><span class="s2">);</span><span class="s1"> 
        rv </span><span class="s2">= (</span><span class="s1">RecyclerView</span><span class="s2">) </span><span class="s1">md</span><span class="s2">.</span><span class="s1">findViewById</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">id</span><span class="s2">.</span><span class="s1">dialog_rv_list</span><span class="s2">);</span><span class="s1"> 
        rv</span><span class="s2">.</span><span class="s1">setVisibility</span><span class="s2">(</span><span class="s1">View</span><span class="s2">.</span><span class="s1">VISIBLE</span><span class="s2">);</span><span class="s1"> 
        rv</span><span class="s2">.</span><span class="s1">setLayoutManager</span><span class="s2">(</span><span class="s0">new </span><span class="s1">LinearLayoutManager</span><span class="s2">(</span><span class="s1">context</span><span class="s2">));</span><span class="s1"> 
        rv</span><span class="s2">.</span><span class="s1">setAdapter</span><span class="s2">(</span><span class="s1">adapterFriend</span><span class="s2">);</span><span class="s1"> 
        mb</span><span class="s2">.</span><span class="s1">positiveText</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">selective</span><span class="s2">);</span><span class="s1"> 
        mb</span><span class="s2">.</span><span class="s1">onPositive</span><span class="s2">(</span><span class="s0">new </span><span class="s1">MaterialDialog</span><span class="s2">.</span><span class="s1">SingleButtonCallback</span><span class="s2">() {</span><span class="s1"> 
            @Override 
            </span><span class="s0">public void </span><span class="s1">onClick</span><span class="s2">(</span><span class="s1">@NonNull </span><span class="s0">final </span><span class="s1">MaterialDialog dialog</span><span class="s2">, </span><span class="s1">@NonNull DialogAction which</span><span class="s2">) {</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">friendId</span><span class="s2">.</span><span class="s1">isEmpty</span><span class="s2">())</span><span class="s1"> 
                    friendId</span><span class="s2">.</span><span class="s1">addAll</span><span class="s2">(</span><span class="s1">adapterFriend</span><span class="s2">.</span><span class="s1">checkedList</span><span class="s2">());</span><span class="s1"> 
                </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                    friendId</span><span class="s2">.</span><span class="s1">clear</span><span class="s2">();</span><span class="s1"> 
                    friendId</span><span class="s2">.</span><span class="s1">addAll</span><span class="s2">(</span><span class="s1">adapterFriend</span><span class="s2">.</span><span class="s1">checkedList</span><span class="s2">());</span><span class="s1"> 
                </span><span class="s2">}</span><span class="s1"> 
                body</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">group_id_key</span><span class="s2">), </span><span class="s1">listDataHeader</span><span class="s2">.</span><span class="s1">get</span><span class="s2">(</span><span class="s1">ExpandableListView</span><span class="s2">.</span><span class="s1"> 
                        getPackedPositionGroup</span><span class="s2">(</span><span class="s1">pos</span><span class="s2">)).</span><span class="s1">getGroupId</span><span class="s2">());</span><span class="s1"> 
                body</span><span class="s2">.</span><span class="s1">put</span><span class="s2">(</span><span class="s1">getString</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">id_key</span><span class="s2">), </span><span class="s1">friendId</span><span class="s2">);</span><span class="s1"> 
                retrofit2</span><span class="s2">.</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">call </span><span class="s2">= </span><span class="s1">statusRequest</span><span class="s2">.</span><span class="s1">getFriendAddInGroupStatus</span><span class="s2">(</span><span class="s1">body</span><span class="s2">);</span><span class="s1"> 
                dialog</span><span class="s2">.</span><span class="s1">cancel</span><span class="s2">();</span><span class="s1"> 
                </span><span class="s0">if </span><span class="s2">(</span><span class="s1">InternetConnection</span><span class="s2">.</span><span class="s1">checkConnection</span><span class="s2">(</span><span class="s1">context</span><span class="s2">)) {</span><span class="s1"> 
                    Progress</span><span class="s2">.</span><span class="s1">Show</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s3">&quot;Adding Friend to group..&quot;</span><span class="s2">);</span><span class="s1"> 
                    call</span><span class="s2">.</span><span class="s1">enqueue</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Callback</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt;() {</span><span class="s1"> 
                        @Override 
                        </span><span class="s0">public void </span><span class="s1">onResponse</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">call</span><span class="s2">, </span><span class="s1">Response</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">response</span><span class="s2">) {</span><span class="s1"> 
                            </span><span class="s0">if </span><span class="s2">(</span><span class="s1">response</span><span class="s2">.</span><span class="s1">body</span><span class="s2">().</span><span class="s1">isMembers</span><span class="s2">()) {</span><span class="s1"> 
                                Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s1">GroupsActivity</span><span class="s2">.</span><span class="s0">this</span><span class="s2">, </span><span class="s3">&quot;Successful&quot;</span><span class="s2">, </span><span class="s1">Toast</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                                Progress</span><span class="s2">.</span><span class="s1">Cancel</span><span class="s2">();</span><span class="s1"> 
                                holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">performClick</span><span class="s2">();</span><span class="s1"> 
                                listAdapter</span><span class="s2">.</span><span class="s1">notifyDataSetChanged</span><span class="s2">();</span><span class="s1"> 
                            </span><span class="s2">} </span><span class="s0">else </span><span class="s2">{</span><span class="s1"> 
                                Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s1">GroupsActivity</span><span class="s2">.</span><span class="s0">this</span><span class="s2">, </span><span class="s3">&quot;UnSuccessful&quot;</span><span class="s2">, </span><span class="s1">Toast</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                                Progress</span><span class="s2">.</span><span class="s1">Cancel</span><span class="s2">();</span><span class="s1"> 
                                holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">performClick</span><span class="s2">();</span><span class="s1"> 
                                listAdapter</span><span class="s2">.</span><span class="s1">notifyDataSetChanged</span><span class="s2">();</span><span class="s1"> 
                            </span><span class="s2">}</span><span class="s1"> 
                            dialog</span><span class="s2">.</span><span class="s1">cancel</span><span class="s2">();</span><span class="s1"> 
                            Progress</span><span class="s2">.</span><span class="s1">Cancel</span><span class="s2">();</span><span class="s1"> 
                            holder</span><span class="s2">.</span><span class="s1">getGroupRefreshList</span><span class="s2">().</span><span class="s1">performLongClick</span><span class="s2">();</span><span class="s1"> 
 
                        </span><span class="s2">}</span><span class="s1"> 
 
                        @Override 
                        </span><span class="s0">public void </span><span class="s1">onFailure</span><span class="s2">(</span><span class="s1">Call</span><span class="s2">&lt;</span><span class="s1">Status</span><span class="s2">&gt; </span><span class="s1">call</span><span class="s2">, </span><span class="s1">Throwable t</span><span class="s2">) {</span><span class="s1"> 
                            Toast</span><span class="s2">.</span><span class="s1">makeText</span><span class="s2">(</span><span class="s1">GroupsActivity</span><span class="s2">.</span><span class="s0">this</span><span class="s2">, </span><span class="s3">&quot;Unsuccessful&quot;</span><span class="s2">, </span><span class="s1">Toast</span><span class="s2">.</span><span class="s1">LENGTH_SHORT</span><span class="s2">).</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
                            Progress</span><span class="s2">.</span><span class="s1">Cancel</span><span class="s2">();</span><span class="s1"> 
                            onStart</span><span class="s2">();</span><span class="s1"> 
 
                        </span><span class="s2">}</span><span class="s1"> 
                    </span><span class="s2">});</span><span class="s1"> 
                </span><span class="s2">} </span><span class="s0">else </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">toastShortString</span><span class="s2">(</span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">NET_NOT_AVAILABLE</span><span class="s2">, </span><span class="s1">getApplicationContext</span><span class="s2">());</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">setVibrate</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">INTENSITY_MIDDLE</span><span class="s2">);</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
        mb</span><span class="s2">.</span><span class="s1">negativeText</span><span class="s2">(</span><span class="s1">R</span><span class="s2">.</span><span class="s1">string</span><span class="s2">.</span><span class="s1">cancel_btn</span><span class="s2">);</span><span class="s1"> 
        mb</span><span class="s2">.</span><span class="s1">onNegative</span><span class="s2">(</span><span class="s0">new </span><span class="s1">MaterialDialog</span><span class="s2">.</span><span class="s1">SingleButtonCallback</span><span class="s2">() {</span><span class="s1"> 
            @Override 
            </span><span class="s0">public void </span><span class="s1">onClick</span><span class="s2">(</span><span class="s1">@NonNull MaterialDialog dialog</span><span class="s2">, </span><span class="s1">@NonNull DialogAction which</span><span class="s2">) {</span><span class="s1"> 
                dialog</span><span class="s2">.</span><span class="s1">cancel</span><span class="s2">();</span><span class="s1"> 
                AppLog</span><span class="s2">.</span><span class="s1">setVibrate</span><span class="s2">(</span><span class="s1">context</span><span class="s2">, </span><span class="s1">AppLog</span><span class="s2">.</span><span class="s1">INTENSITY_HIGH</span><span class="s2">);</span><span class="s1"> 
            </span><span class="s2">}</span><span class="s1"> 
        </span><span class="s2">});</span><span class="s1"> 
        mb</span><span class="s2">.</span><span class="s1">show</span><span class="s2">();</span><span class="s1"> 
    </span><span class="s2">}</span><span class="s1"> 
 
</span><span class="s2">}</span><span class="s1"> 
</span></pre>
</body>
</html>